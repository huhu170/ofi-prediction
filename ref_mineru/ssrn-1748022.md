# STATISTICAL MODELING OF HIGH FREQUENCY FINANCIAL DATA: FACTS, MODELS AND CHALLENGES

Rama CONT

Laboratoire de Probabilites et Mod ´ eles Al \` eatoires, ´ CNRS-Universite de Paris VI ´ & IEOR Dept, Columbia University, New York

The availability of high frequency data on transactions, quotes and order flow in electronic order-driven markets has revolutionized data processing and statistical modeling techniques in finance and brought up new theoretical and computational challenges. Market dynamics at the transaction level cannot be characterized solely in terms the dynamics of a single price and one must also take into account the interaction between buy and sell orders of different types by modeling the order flow at the bid price, ask price and possibly other levels of the limit order book. We outline the empirical characteristics of high frequency financial time series and provide an overview of stochastic models for the continuous-time dynamics of a limit order book, focusing in particular on models which describe the limit order book as a queuing system. We describe some applications of such models and point to some open problems.1

![](images/b2e79fe8b58bc903765b2861332a5699dbc046a895285cdfc4e2471cdbc69f4f.jpg)

Keywords: high frequency financial data, limit order book, duration modeling, queueing systems, heavy traffic limit, transaction data, tick data, bid-ask spread, Hawkes process, point process.

# Contents

1 Electronic order-driven markets 1

2 Trades, quotes and order flow 2

3 Dynamics of limit order books 4

4 Heavy-traffic limits and diffusion approximations 6

5 Price impact modeling 8

6 Connecting volatility across time scales 9

7 Perspectives and challenges 9

# 1. ELECTRONIC ORDER-DRIVEN MARKETS

In recent years, automated trading and dealing have largely replaced floor-based trading in equity markets. Electronic Crossing Networks (ECN’s) such as Archipelago, Instinet, Brut and Tradebook providing order-driven trading systems have captured a large share of the market. In contrast to markets where a market maker or specialist centralizes buy and sell orders and provides liquidity by setting bid and ask quotes, these electronic platforms aggregate all outstanding limit orders in a limit order book that is available to market participants and market orders are executed against the best available prices, in a mechanical manner. As a result of the ECN’s popularity, established exchanges such as the NYSE, Nasdaq, the Tokyo Stock Exchange, Toronto Stock Exchange, Vancouver Stock Exchange, Euronext (Paris, Amsterdam, Brussels), and the London Stock Exchange have fully or partially adopted electronic order-driven platforms.

At the same time, the frequency of submission of orders has increased and the time to execution of market orders on these electronic markets has dropped from more than $2 5 \mathrm { { m i l } }$ - liseconds in 2000 to less than a millisecond in 2010. As shown in Table 1, thousands of orders are submitted in a 10- second interval, resulting in frequent updates in bid and ask quotes, up to hundred thousand times a day, as well as frequent changes in transaction prices.

Table 1. Average number of orders in 10 seconds and number of price changes (June 26th, 2008).   

<table><tr><td></td><td>Average no. of orders in 10s</td><td>Price changes in 1 day</td></tr><tr><td>Citigroup</td><td>4469</td><td>12499</td></tr><tr><td>General Electric</td><td>2356</td><td>7862</td></tr><tr><td>General Motors</td><td>1275</td><td>9016</td></tr></table>

As a result, the evolution of supply, demand and price behavior in equity markets is being increasingly recorded: this data is available to market participants in real time and for researchers in the form of high frequency databases. The analysis of such high frequency data constitutes a challenge, not the least because of their sheer volume and complexity. These data provide us with a detailed view of the complex dynamic process through which the market ‘digests’ the inflow of supply and demand to generate the price [14, 38].

The large volume of data available, the presence of statistical regularities in the data and the mechanical nature of execution of orders makes order-driven markets interesting candidates for statistical analysis and stochastic modelling.

Table 2. A hierarchy of time scales.   

<table><tr><td rowspan=1 colspan=1>Regime</td><td rowspan=1 colspan=1>Time scale</td><td rowspan=1 colspan=1>Issues</td></tr><tr><td rowspan=1 colspan=1>Ultra-highfrequency (UHF)</td><td rowspan=1 colspan=1>∼ 10−3 - 0.1 s</td><td rowspan=1 colspan=1>Microstructure,Latency</td></tr><tr><td rowspan=1 colspan=1>HighFrequency (HF)</td><td rowspan=1 colspan=1>~ 1 - 100 s</td><td rowspan=1 colspan=1>Tradeexecution</td></tr><tr><td rowspan=1 colspan=1>&quot;Daily&quot;</td><td rowspan=1 colspan=1>∼ 103 - 104 s</td><td rowspan=1 colspan=1>Trading strategies,Option hedging</td></tr></table>

At a fundamental level, statistical analysis and modeling of high frequency data can provide insight into the interplay between order flow, liquidity and price dynamics [15, 55, 29] and might help bridge the gap between market microstructure theory [12, 51, 30, 33, 45, 54]–which has provided useful insights by focusing on models of price formation mechanism in stylized equilibrium settings– and ‘black box’ stochastic models used in financial risk management, which represent the price as an exogenous random process.

At the level of applications, models of high frequency data provide a quantitative framework for market making [8] and optimal execution of trades [2, 11, 50, 1]. Another obvious application is the development of statistical models in view of predicting short term behavior of market variables such as price, trading volume and order flow.

The study of high frequency market dynamics is also important for risk management and regulation. Even though the horizons traditionally considered by risk managers and regulators have been longer ones (typically, daily or longer), trading strategies, at different frequencies may interact in a complex manner, leading to ripples across time scales which propagate from high frequency to low frequency and even leading to possible market disruptions, as shown by the Flash Crash of May 2010 [16, 44].

# 2. TRADES, QUOTES AND ORDER FLOW

High frequency data in finance involve time series of prices and quantities associated to these prices. However, when one looks at transaction-level frequencies, a security is not characterized by a single price: one must distinguish between transaction data –which record quantities that were actually traded and the prices at which they were traded– and quotes –proposals to buy or sell a given quantity of an asset at a given price.

# 2.1. Transaction data

Transaction data record trades that occur on an exchange, each record being associated with a time stamp, a price and quantity (trade volume, in number of shares). Transaction data present several particularities which differentiate them from financial time series sampled, say, at daily frequency [38, 39].

Price changes are discrete: they are multiples of the minimal price change $\delta \cdot$ –the ’tick’– and more than often equal to one, two or a few ticks. These price changes are not independent: the autocorrelation function of transaction price returns is significantly negative at the first lag and then it rapidly decreases to zero [17]. This is a typical microstructure effect which disappears when one considers returns at longer time scales.

Trades occur at irregular intervals: the durations between successive trades reflect the intensity of trading activity [39]: they are random and endogenous i.e. linked to the behavior of the price and possibly to previous trading history. With respect to traditional time series models, this poses the additional problem of modeling the durations. These durations are neither independent –they show significant autocorrelation– nor exponentially distributed: Figure 1 displays a quantilequantile plot comparing the distribution of duration for Citigroup to an exponential distribution. The irregularity of observations makes it much easier to work with continuous-time model, as opposed to time series models based on a fixed time step. The sizes of these transactions –trading volume– are both heterogeneous and strongly autocorrelated [25].

Another issue with high frequency data is the presence of seasonality effects. Trading activity is far from uniform during the trading day and exhibits a U-shaped pattern: activity is typically highest at the market open and close, and lowest around lunch time. Quantities related to price volatility and trading volume also follow strong intraday seasonality patterns. As a result, intraday data cannot be treated as stationary and should be first de-seasonalized before further analysis. This is done in practice by averaging across many days to obtain a seasonality profile or by using Fourier-based filtering methods. Statistical models of transaction data need to jointly model the durations and the price changes. It is thus natural to model such data as a marked point process [22]. One approach is to consider a stochastic model for durations and, conditional on the duration, model the price changes using a classical ARMA or GARCH model [24, 32]. The duration $\tau _ { i }$ between transactions $i - 1$ and $i$ may be represented as

![](images/ed2dc7ed4046b10e99db20bfd2b6b534555877324ceab441053e00189201abb4.jpg)  
Fig. 1. Quantiles of inter-event durations compared with quantiles of an exponential distribution with the same mean (Citigroup, June 2008). The dotted line represents the quantiles of an exponential distribution fitted to the observed durations, which are found to be quite different from the empirical quantiles.

$$
\tau _ { i } = \psi _ { i } \epsilon _ { i } ,
$$

where $( \epsilon _ { i } ) _ { i \geq 1 }$ is a sequence of independent positive random variables with common distribution and $\mathbb { E } [ \epsilon _ { i } ] = 1$ and the conditional duration $\psi _ { i } = \mathbb { E } [ \tau _ { i } | \psi _ { i - j } , \tau _ { i - j } , j \geq 1 ]$ is modeled as a function of past history of the process:

$$
\psi _ { i } = G ( \psi _ { i - 1 } , \psi _ { i - 2 } , . . . , . . ; \tau _ { i - 1 } , \tau _ { i - 2 } , . . . , . . ) .
$$

Engle and Russell’s Autoregressive Conditional Duration model [24] proposes an $\mathbf { A R M A } ( p , q )$ representation for $G$ :

$$
\psi _ { i } = a _ { 0 } + \sum _ { i = 1 } ^ { p } a _ { k } \psi _ { i - k } + \sum _ { i = 1 } ^ { q } b _ { q } \tau _ { j - k }
$$

where $( a _ { 0 } , . . . , a _ { p } )$ and $( b _ { 1 } , . . . , b _ { q } )$ are positive constants. The ACD-GARCH model of Ghysels and Jasiak [32] combines this model with a GARCH model for the returns. Engle [25] proposes a GARCH-type model with random durations where the volatility of a price change may depend on the previous durations. Variants and extensions are discussed in [10, 39]. Such models, like ARMA or GARCH models defined on fixed time intervals, have easily computable likelihood functions so maximum likelihood estimation may be done numerically.

![](images/9ae1306fa5180a01852d2916fecc49ac55b12fe65f1a91b6b719a4d2e78ea125.jpg)  
Fig. 2. A limit buy order: Buy 2 at 69200.

# 2.2. Quotes and order flow

Market participants can post two types of buy/sell orders. A limit order is an order to trade a certain amount of a security at a given price. Limit orders are posted to electronic trading system and the state of outstanding limit orders posted by market participants can be summarized by stating the quantities posted at each price level: this is known as the limit order book. An example of a limit order book is shown in Figure 2. The lowest price for which there is an outstanding limit sell order is called the ask price and the highest buy price is called the bid price.

A market order is an order to buy/sell a certain quantity of the asset at the best available price in the limit order book. When a market order arrives it is matched with the best available price in the limit order book and a trade occurs. The quantities available at the bid/ask in the limit order book are decreased by $x$ when a market order of size $x$ is executed. Figure 3 shows the evolution of a limit order book when a market order is executed.

A limit order sits in the order book until it is either executed against a market order or it is canceled. A limit order may be executed very quickly if it corresponds to a price near the bid and the ask, but may take a long time if the market price moves away from the requested price or if the requested price is too far from the bid/ask. Alternatively, a limit order can be canceled at any time. On most electronic exchanges, most limit orders are cancelled shortly after being posted: for many liquid stocks on the NYSE and NASDAQ, up to $80 \%$ of limit orders are canceled within less than a second of posting.

![](images/9138a1167291b7db5f2ebbdef48d93a72e896b43b41932d2aa6f593c10cde3ae.jpg)  
Fig. 3. A market sell order of 10.

Quote data contain the evolution of the bid and ask prices and the quantities (number of shares) quoted at these prices. These quantities vary every time a limit order is posted, executed against a market order or cancelled. Figure 4 shows the intraday evolution of the ask price for Citigroup on June 26, 2008.

Trades and quotes data are available for a wide range of stock exchanges and markets worldwide. The most well known trade and quote database is the TAQ database, maintained by New York Stock Exchange (NYSE) since 1993. Trade and quote data allow to reconstruct the sequence of limit and market orders and infer whether the transaction was buyer or seller initiated. The idea is to compare the trade price with the bid and ask price of the prevailing quote, which is the most recent past quote. This is the basis of the Lee and Ready algorithm [47] for assigning signs to trades (see also [20] for a discussion).

Most stocks are simultaneously quoted on many exchanges and, at each point in time, there is a reference National Best Bid-Offer (NBBO) quote but the uniqueness of the NBBO should not hide the multiplicity of order books, with different depths and bid-ask spreads, which is the reality of this market.

Quote data are sometimes known as the ’Level I order book’, since they correspond to the first (i.e. best price) level of the order book. More generally high frequency time series of order book data have become available in the recent years: Level II order book data give the prices and quantities for the first 5 non-empty levels of the book on each side, while complete order book data correspond to quantities at all price levels [21]. Order books for many stocks, including liquid ones, have typically less than 5 active queues on each side of the order book, the rest being empty or sparsely filled [14].

# 3. DYNAMICS OF LIMIT ORDER BOOKS

In a limit order market, outstanding limit orders at any given time are represented by the limit order book, which summarizes the state of supply and demand. Not surprisingly, empirical studies [21, 35] show that the state of the order book contains information on short-term price movements so it is of interest to provide forecasts of various quantities conditional on the state of the order book. Order books presents a rich palette of statistical features [14, 29, 34, 41, 55] which are challenging to incorporate in a statistical model, partly because of the high dimensionality of the order book and the complexity of its evolution. Providing analytically tractable models which enable to compute and/or reproduce conditional quantities which are relevant for trading and intraday risk management has proven to be challenging, given the complex relation between order book dynamics and price behavior.

![](images/70e1e76863666481c513d710a4561e7fb6e1f8287e764b872514a1c1e75a8519.jpg)  
Fig. 4. Intraday evolution of the ask price: Citigroup, 26 June 2008. Horizontal axis: number of events.

# 3.1. The limit order book as a queueing system

The state of the order book is modified by order book events: limit orders (at the bid or ask), market orders and cancelations [21, 20, 55]. A limit buy (resp. sell) order of size $x$ increases the size of the bid (resp. ask) queue by $x$ .

Market orders are executed against limit orders at the best available price: a market order decreases of size $x$ the corresponding queue size by $x$ . Limit orders placed at the best available price are automatically executed against market orders according to a priority rule. In many electronic equity markets, priority is based on the time of arrival (first-come, first served). However, other priority rules exist: size-based priority grants priority to larger orders, while pro-rata matching, used in some fixed income futures markets such as EU-REX, allocates shares to limit orders proportionally to their size [46]. Cancellation of $x$ orders in a given queue reduces the queue size by $x$ .

It is thus natural to represent a limit order book as a multiclass queueing system [21, 55] i.e. a system of (interacting)

queues of buy and sell limit orders, executed against market orders (’the server’) or cancelled before execution. Point processes and queueing analogies have been used early on for modeling order flows in securities markets [48] were considered by Smith et al [55] for limit order book modeling. Queueing models allow for analytical computation of many quantities of interest [21, 19, 4].

A queueing model of limit order book dynamics consists in specifying the arrival rates of different types of order book events (limit buy, limit sell, market buy, market sell, buy/sell cancel) and the rules of execution of these orders. The evolution of the order book is then defined by the order flow and the dynamics of durations, prices and bid-ask spreads are then endogenous in these models. The arrival rates may be taken constant –leading to a Poisson order flow [21]– or be stochastic processes affected by the state of the order book and by recent order flow [4].

Cont, Stoikov and Talreja [21] study a Markovian queueing model in which arrivals of market orders and limit orders at each price level are independent Poisson processes and compute analytically, using simple matrix computations and Laplace transform methods, the distribution of time to fill (execution time), the probability of ’making the spread’ and the conditional distribution of price moves given the state of the order book [21]. Though the Poisson assumption is not very realistic –durations are neither exponentially distributed nor independent– the model is shown to capture effectively the short-term dynamics of a limit order book.

In reality, the order flow is clustered in time: as shown in Figure 5, we observe periods with a lot of market buy orders and periods with a lot of market sell orders [4, 40]. This is partly due to the fact that many observed orders are in fact components of a larger ’parent’ order which is executed in small blocks to minimize market impact [2]. This results in a significant autocorrelation in durations, as well as a positive cross-correlation of arrival rates across event types (market buy, limit sell, etc.). These features, which are not captured in models based on Poisson processes, may be adequately represented by a multidimensional self-exciting point process [40, 4]: in such models, the arrival rate $\lambda _ { i } ( t )$ of an order of type $i$ is represented as a stochastic process whose value depends on the recent history of the order flow: each new order increases the rate of arrival for subsequent orders of the same type (self-exciting property) and may also affect the rate of arrival of other order types (mutually exciting property):

$$
\lambda _ { i } ( t ) = \theta _ { i } + \sum _ { j = 1 } ^ { J } \delta _ { i j } \int _ { 0 } ^ { t } e ^ { - \kappa _ { i } ( t - s ) } d N _ { j } ( s )
$$

Here $\delta _ { i j }$ measures the impact of events of type $j$ on the rate of arrival of subsequent events of type $i$ : as each event of type $j$ occurs, $\lambda _ { i }$ increases by $\delta _ { i j }$ . In between events, $\lambda _ { i } ( t )$ decays exponentially at rate $\kappa _ { i }$ . Maximum likelihood estimation of this model on TAQ data [4] shows evidence of self-exciting and mutually exciting features in order flow: the coefficients $\delta _ { i j }$ are all significantly different from zero and positive, with $\delta _ { i i } > \delta _ { i j }$ for $j \neq i$ . Andersen et al [4] enhance this basic model by incorporating dependence of parameters $\delta , \kappa$ on the bid-ask spread.

Like models based on Poisson order flow, these models allows for analytical computations of many quantities, without recourse to simulation. The availability of such analytical formulae is a key feature when using such models in real-time applications.

![](images/e8329b573b7a81af270b2b1849284c4ed5c17e3bd31d14de9f2fc5cc4e593a95.jpg)  
Fig. 5. Changes in the size of the ask queue: each data point represents one order or cancellation. Positive values represent sizes of limit orders, negative values represent market orders or cancellation. Citigroup, June 26, 2008.

# 3.2. Queuing models for Level-1 order books

Empirical studies of limit order markets suggest that the major component of the order flow occurs at the (best) bid and ask price levels (see e.g. [13]). Furthermore, studies on the price impact of order book events show that the net effect of orders on the bid and ask queue sizes is the main factor driving price variations [20]. These observations motivate a reducedform modeling approach in which, instead of modeling the order queues at all price levels, one focuses on queue sizes at the best bid and ask [19]. In this approach one focuses on the dynamics of the state variables $( S _ { t } ^ { b } , S _ { t } ^ { a } , q _ { t } ^ { b } , q _ { t } ^ { a } )$ where

∙ the bid price $S _ { t } ^ { b }$ and the ask price $S _ { t } ^ { a }$ ,   
∙ the size of the bid queue $q _ { t } ^ { b }$ representing the outstanding limit buy orders at the bid, and   
∙ the size of the ask queue $q _ { t } ^ { a }$ representing the outstanding limit sell orders at the ask.

Figure 6 summarizes this representation. In principle, the evolution of the size of the queues at the best quotes depends on the deeper levels of the order book: indeed, once the bid (resp. the ask) queue is depleted, the price will move to the queue at the next level, which is queue at the next level below (resp. above) the current bid (ask). The new queue size thus corresponds to what was previously the number of orders sitting at the second-best price. Instead of keeping track of these queues (and the corresponding order flow) at all price levels (as in [21, 55]), Cont & Larrard [19] propose a model in which the bid/ask queue sizes $( q _ { t } ^ { b } , q _ { t } ^ { a } )$ are ’renewed’ at each price change, i.e. every time one of the queues is depleted. More precisely,

![](images/6ceca3d1b8aa7217c0e4223dbc54bd2e0e6d2cbd0fdf739250802ce6cda9dde4.jpg)  
Fig. 6. Level-I representation of a limit order book: in this representation, one keeps track of the quantities of shares available at the bid (best buy price) and the ask (best sell price).

∙ if the ask queue is depleted at $t$ then $( q _ { t } ^ { b } , q _ { t } ^ { a } )$ is a variable with distribution $f$ , where $f ( x , y )$ represents the probability of observing $( q _ { t } ^ { b } , q _ { t } ^ { a } ) = ( x , y )$ right after a price increase.   
∙ if the bid queue is depleted at $t$ then $( q _ { t } ^ { b } , q _ { t } ^ { a } )$ is a variable with distribution $\tilde { f }$ , where $\tilde { f } ( x , \hat { y } )$ represents the probability of observing $( q _ { t } ^ { b } , q _ { t } ^ { a } ) = ( x , y )$ right after a price decrease.

The distributions $f , { \tilde { f } }$ may be estimated from empirical data: an example is shown in Figure 7. They summarize the interaction of the queues at the best bid/ask levels with the rest of the order book, viewed here as a ’reservoir’ of limit orders. Thus $( q _ { t } ^ { b } , q _ { t } ^ { a } )$ is a random process in the positive orthant, ’renewed’ every time it hits the axes. This approach considerably simplifies the model, enhances tractability and makes it easier to estimate parameters.

Between two hitting times, one can specify various dynamics for the queues. Cont & Larrard [19] consider the simplest specification, namely a Markovian model with Poisson arrivals of orders. This model allows to obtain analytical expressions for various quantities of interest such as the distribution of the duration between price changes, the distribution and autocorrelation of price changes, and the probability of an upward move in the price, conditional on the state of the order book. Interestingly, these results provide reasonable fits to empirical data [19], showing that such low-dimensional models may be suitable for many applications. Figure 8 shows an example of such a result, comparing theoretical transition probabilities for the price computed in this reduced-form model with empirical transition probabilities estimated from high frequency data.

![](images/71a6c71c3566960b564a87f881c25c29a3c8dd177d58ab380b6a7b7a5a885e9a.jpg)  
Fig. 7. Empirical (joint) distribution of bid and ask queue sizes after a price move (Citigroup, June 2008) [19]. Unit: blocks of 100 shares.

# 4. HEAVY-TRAFFIC LIMITS AND DIFFUSION APPROXIMATIONS

Analytically tractable models of order book dynamics may contain assumptions which are not statistically realistic: durations between orders are neither independent nor exponentially distributed, and various order types exhibit strong dependence [4]. In addition, the order flow exhibits seasonality as well as dependence with respect to price and spread behavior [14].

While a model incorporating all these features may be too complex to study analytically, two remarks show that the situation is not as hopeless as it may seem at first glance.

First, as shown in Table 1, most applications involve the behavior of prices over time scales an order of magnitude larger than the typical inter-event duration: for example, in optimal trade execution the benchmark is the Volume weighted average price (VWAP) computed over a day or a an hour: over such time scales much of the microstructural details of the market are averaged out. Second, as noted in Table 1, in liquid equity markets the number of events affecting the state of the order book over such time scales is quite large, of the order of hundreds or thousands. The typical duration $\tau _ { L } = 1 / \lambda$ (resp. $\tau _ { M } = 1 / \mu ,$ ) between limit orders (resp. market orders and cancelations) is typically $0 . 0 0 1 - 0 . 0 1 \ll 1$ (in seconds). These observations show that it is relevant to consider asymptotic methods in which the rate of arrival of orders is large, similar to those used in the study of heavy-traffic limits in queueing theory [57]. In this limit, the possibly complex discrete dynamics of the queueing system is approximated by a simpler system with a continuous state space, which can be either described by a system of ordinary differential equations (in the ’fluid limit’, where random fluctuations in queue size vanish) or a system of stochastic differential equations (in the ’diffusion limit’ where random fluctuations dominate). Intuitively, the fluid limit corresponds to the regime of the law of large numbers, where random fluctuations average out and the limit is described by average queue size, whereas the diffusion limit corresponds to the regime of the central limit theorem, where fluctuations in queue size are asymptotically Gaussian. The relevance of each of these asymptotic regimes is, of course, not a matter of taste but an empirical question which depends on the behavior of order flow in the system.

![](images/914ad3e779a8292462fdc0f061620d64c05892916ffb90cf521fba7bf0fd440d.jpg)  
Fig. 8. Conditional probability of a price increase, as a function of the bid and ask queue size, computed using a Markovian queuing model for the Level-1 limit order book [19] (solid curve) compared with transition frequencies for Citigroup tick-by-tick data on June 26, 2008 (points).

As argued in [18], for most liquid stocks, while the rate of arrival of market orders and limit orders is large, the imbalance between limit orders, which increase queue size, and market orders and cancels, which decrease queue size, is an order of magnitude smaller: over, say, a 30 minute interval, one observes an imbalance ranging from 1 to $5 \%$ of order flow. In other words, over a time scale $\tau _ { 1 } \gg \tau _ { L } , \tau _ { M }$ (say, 1 minute) a large number $N \sim \lambda \tau _ { 1 }$ of events occur, but the bid/ask imbalance accumulating over the same interval is of order $\sqrt { N } \ll N$ i.e. $( \lambda - \mu )$ is small, of the order $1 / \sqrt { N }$ . This corresponds to a situation where limit order accumulate and disappear roughly at the same rate. In this regime, the queues follow a diffusive behavior and it is relevant to consider the diffusion limit of the limit order book. When the sequences of order sizes at the bid and the ask $( V _ { i } ^ { a } , V _ { i } ^ { b } , i \ge 1 )$ and inter-event durations $( \tau _ { i } ^ { a } , \tau _ { i } ^ { b } , i \geq 1 )$ are weakly dependent covariance-stationary sequences, the rescaled order book process converges weakly [18]

$$
( \frac { q ^ { a } ( n t ) } { \sqrt { n } } , \frac { q ^ { b } ( n t ) } { \sqrt { n } } ) _ { t \geq 0 } { \stackrel { d } { \Rightarrow } } ( Q _ { t } ) _ { t \geq 0 }
$$

to a Markov process $( Q _ { t } ) _ { t \geq 0 }$ diffusing in the quarter-plane

$$
\{ ( x , y ) , \quad x \geq 0 , y \geq 0 \}
$$

which is “renewed” every time it hits one of the axes. In the case of a balanced order book where the arrival rate of limit orders matches on average their depletion rate by market orders and cancels and $E [ V _ { a } ^ { i } ] = E [ V _ { b } ^ { i } ] = 0$ , the process $Q _ { t }$

∙ behaves like a planar Brownian motion with drift $b$ and covariance matrix $\left( \begin{array} { c c } { { \lambda _ { a } v _ { a } ^ { 2 } } } & { { \rho v _ { a } v _ { b } \sqrt { \lambda _ { a } \lambda _ { b } } } } \\ { { \rho v _ { a } v _ { b } \sqrt { \lambda _ { a } \lambda _ { b } } } } & { { \lambda _ { b } v _ { b } ^ { 2 } } } \end{array} \right)$ (1) on the interior of the orthant $\{ ( x , y ) , \quad x > 0 , y > 0 \}$ ,   
∙ is reinitialized according to $F$ each time it hits the xaxis and   
∙ is reinitialized according to $\tilde { F }$ each time it hits the yaxis.

$Q _ { t }$ is an example of ’regulated Brownian motion’ [36], a notion introduced in the context of heavy traffic limits of multiclass queueing systems. Here $\delta$ is the ’tick’ size,

∙ $\begin{array} { r } { { 1 } / { \lambda _ { a } } = \operatorname* { l i m } _ { n \to \infty } ( \tau _ { 1 } ^ { a } + \ldots + \tau _ { n } ^ { a } ) / n } \end{array}$ is the average duration between events at the ask,   
∙ $\begin{array} { r } { v _ { a } ^ { 2 } = \mathbb { E } [ ( V _ { 1 } ^ { a } ) ^ { 2 } ] + 2 \sum _ { i = 2 } ^ { \infty } C o v ( V _ { 1 } ^ { a } , V _ { i } ^ { a } ) } \end{array}$ represents the variance of event sizes at the ask,   
∙ $\begin{array} { r } { 1 / \lambda _ { b } = \operatorname* { l i m } _ { n \to \infty } ( \tau _ { 1 } ^ { b } + \ldots + \tau _ { n } ^ { b } ) / n } \end{array}$ is the average duration between events at the bid,   
∙ $\begin{array} { r } { v _ { b } ^ { 2 } = \mathbb { E } [ ( V _ { 1 } ^ { b } ) ^ { 2 } ] + 2 \sum _ { i = 2 } ^ { \infty } C o v ( V _ { 1 } ^ { b } , V _ { i } ^ { b } ) } \end{array}$ represents the variance of event sizes at the ask,   
∙ $F$ (resp. $\tilde { F }$ ) is the (rescaled) distribution of $( q ^ { a } , q ^ { b } )$ after a price increase (resp. decrease), and   
$\rho = { \frac { 1 } { v _ { a } v _ { b } } } \left( \mathrm { c o v } [ V _ { 1 } ^ { a } V _ { 1 } ^ { b } ] + 2 \sum _ { i = 1 } ^ { \infty } \mathrm { c o v } [ V _ { 1 } ^ { a } V _ { i } ^ { b } ] + \mathrm { c o v } [ V _ { 1 } ^ { b } V _ { i } ^ { a } ] \right)$ measures the correlation between order sizes at the bid and at the ask. If order sizes at the bid and ask are symmetric and uncorrelated then $\rho = 0$ . Empirically ones finds that $\rho < 0$ for equity order books [18].

This diffusion approximation is analytically tractable and allows to compute analytically [18] many quantities such as the duration until the next price change, the probability of an increase in the price, the distribution of the time to execution,... conditionally on the state of the order book. For example, in the symmetric case $\lambda _ { a } = \lambda _ { b } , v _ { a } = v _ { b }$ , the probability $p _ { \mathrm { u p } } ( x , y )$ that the next price move is an increase, given a queue of $x$ shares on the bid side and $y$ shares on the ask side, has a simple expression [18]:

$$
p _ { \mathrm { u p } } ( x , y ) = { \frac { 1 } { 2 } } - { \frac { \arctan ( \sqrt { \frac { 1 + \rho } { 1 - \rho } } { \frac { y - x } { y + x } } ) } { 2 \arctan ( \sqrt { \frac { 1 + \rho } { 1 - \rho } } ) } }
$$

which only depends on the size $x$ of the bid queue, the size $y$ of the ask queue, and the correlation $\rho$ between event sizes at the bid and the ask.

Beyond their computational aspect, these analytical results shed light on the relation between order flow and price dynamics. A nice application is given by Avellaneda, Reed and Stoikov [9]: using formula (2) in the case $\rho = - 1$ , they invert the ’effective’ size $( x , y )$ of the queues from the empirical transition probabilities of the price and compare it to the visible queue size: the difference, which they call ‘hidden liquidity’, is shown to account for a significant portion of market depth for some US stocks.

Studies based on proprietary data [26, 3, 49] are able to measure impact of “parent orders” gradually executed over time and give a different picture. Using large-cap US equity orders executed by Citigroup Equity Trading, Almgren et al [3] find evidence for a nonlinear dependence of temporary price impact $\Delta S$ as function of trade size $V$ , of the form $\bar { \Delta S } \sim \bar { V ^ { 3 / 5 } }$ across the range of trade sizes considered, but reject the ‘square root’ law. Obizhaeva [49] studies the short run price-volume relation using a proprietary data set of portfolio transitions using a methodology which corrects for the endogeneity of trading decisions and finds that, in the short run, purchases of stocks induce permanent price increases, the magnitude of which is proportional to the size of the trade. Moreover, if volume is expressed as a percentage of average daily volume and returns are expressed as a percentage of daily volatility, the proportionality constant is relatively stable across stocks.

# 5. PRICE IMPACT MODELING

A particularly important issue for applications is the impact of orders on prices: the optimal liquidation of a large block of shares, given a fixed time horizon, crucially involves assumptions on price impact (see Bertsimas and Lo [11], Almgren and Chriss [2], Obizhaeva and Wang [50], Alfonsi and Schied [1]). Of course, any model for the dynamics of the (full) order book implies a model of price impact. However, even in simple models for order book dynamics the price impact may be difficult to characterize. Hence, the typical approach is to investigate the relation between price changes and order flow directly using high frequency data.

![](images/09877ce7be3c445c108f09c899b3d7b67b76e6135cc51874bbe87396f9de3d74.jpg)  
Fig. 9. Price impact of a market order.

Various models for price impact have been proposed in the literature but there is little agreement on how to model it: price impact has been described by various authors as linear, non-linear, square root, temporary, instantaneous, permanent or transient. The only consensus seems to be the intuitive notion that imbalance between supply and demand moves prices.

The empirical literature on price impact has primarily focused on trades. Starting with Hasbrouck [37], empirical studies on public data [28, 31, 37, 42, 43, 56, 53] have investigated the relation between the direction and sizes of trades and price changes and typically conclude that the price impact of trades is an increasing, concave (“square root”) function of their size.

This focus on trades leaves out the information in quotes, which provide a more detailed picture of price formation [27, 23, 20]. In fact, knowledge of the limit order book allows to estimate the short term price impact of incoming orders. This can be understood by considering the following example of an order book with constant number of shares $D$ per level (see Figure 9). If, during a short time interval $[ t , t + \Delta ]$ , the volume of incoming limit orders (resp. market orders and cancellations) at the bid are $L$ (resp. $M , C )$ shares, then the net change in the number of limit orders at the bid is $L - M -$ $C$ . If the depth of the order book is $D$ shares (on average) at each level then the change in the bid price will be

$$
S ( t + \Delta ) - S ( t ) = \delta \left[ \frac { L - M - C } { D } \right]
$$

where $\delta$ is the tick size and $[ . ]$ denotes the integer part. This example, illustrated in Figure 9, shows that the change in the bid (resp. ask) price is determined by the order flow imbalance $L - M - C$ at the bid (resp. the ask), defined as the sum of limit order minus the market orders and cancellations during the interval $[ t , t + \Delta ]$ [20]:

$$
O F I ( t , t + \Delta ) = L - M - C
$$

Motivated by this example, Cont, Kukanov and Stoikov [20] investigate a model in which high frequency price changes are

driven by order flow imbalance:

$$
\frac { S ( t + \Delta ) - S ( t ) } { \delta } = c \frac { O F I ( t , t + \Delta ) } { D ( t ) } + \epsilon ( t ) ,
$$

where $\delta$ is the tick size, $\epsilon ( t )$ is a (white) noise term and $D ( t )$ is a measure of order book depth (number of limit orders at the bid/ask) . Empirical analysis of 1 second and 10 second midprice changes using the TAQ database for US stocks show empirical evidence for the linear price impact model [20]: $c$ is estimated to be typically between 0.1 and 1.

The linear model (5) is quite different from models of price impact that consider only the size of trades [31, 37, 43, 56, 52, 53]. Instead of looking at price impact of trades as a (nonlinear) function of trade size, it shows that all order book events (including trades) have a linear price impact, equal to $c / D ( t )$ on average, and this impact can be summarized by aggregating all events into a single variable, the order flow imbalance. This representation also implies that price impact has strong intraday seasonality, which follows the seasonality patterns in order book depth; this is indeed shown to be the case empirically [20].

# 6. CONNECTING VOLATILITY ACROSS TIME SCALES

While most econometric models of price volatility were initially developed with a focus on daily returns, with the advent of intraday and high frequency trading there is an increasing need for developing realistic statistical models for intraday volatility prediction and risk management. High-frequency data are also of interest for the estimation of volatility at daily level: as shown by Andersen and Bollerslev [6, 5, 7], realized variance computed from high frequency data yields a better estimator of daily volatility than estimates computed from daily returns.

One approach is to combine time series models -such as GARCH models - developed for daily returns, with a model for durations between trades–such as the ACD model [24]: this allows to incorporate the information on variable rates of activity, peaks in trading activity being represented by shorter durations [25, 32]. This approach has been mostly applied to transaction data but similar approach may also be considered for quotes [27].

Another approach for establishing a link between volatility and order flow is to start from a model for order book dynamics, and compute the diffusion limit of the price process which describes the diffusive behavior of the price at longer time scales. This idea is implemented in [19, 18] by proving a functional central limit theorem for the order book models described above. This result allows in particular to compute the variance of price changes over a time scale $T \gg \tau _ { 0 }$ much larger than the typical inter-event duration. For example, in a Markovian model for a symmetric Level 1 order book, Cont & Larrard [19] derive the following relation between the standard deviation $\sigma$ of price increments $S ( t + T ) - S ( t )$ and the statistics of order flow:

$$
\sigma = \frac { v \delta } { D ( F ) } \sqrt { \frac { \pi \lambda T } { \tau _ { 0 } } } = v \delta \lambda \frac { \sqrt { \pi T } } { D ( F ) } ,
$$

where $\lambda = 1 / \tau _ { 0 }$ is the order flow in shares per unit time, $F$ is the distribution of queue sizes after a price change and $\begin{array} { r } { D ( F ) = \sqrt { \int x y d F ( x , y ) } } \end{array}$ is a measure of order book depth: it is the geometric mean of the queue size at the bid and the ask after a price change. Here $\pi$ is the familiar ratio of a circle’s perimeter to its diameter. In particular, this relation suggests that the high frequency properties of order flow contribute to price volatility mainly through $\lambda$ and $D ( F )$ : for stocks that trade at the same frequency, volatility increases with the ratio $\lambda / D ( F )$ . This prediction is empirically verified for major US stocks [19]. Similar relation may be obtained for non-Markovian and asymmetric models, see [18]

# 7. PERSPECTIVES AND CHALLENGES

Existing studies have only scratched the surface of high frequency financial data: much remains to be done towards a better analysis and understanding of intraday dynamics of financial markets and the development of operational models.

These studies have mostly focused on equity markets and, to a lesser extent, futures markets and foreign exchange markets. Further studies are necessary on other markets – in particular fixed income markets and markets for listed derivatives– which have their own features.

Also, almost all existing models focus on single-asset markets, whereas, in practice, most applications –in trading, risk management or regulation– involve multiple assets and portfolios. Extending univariate models to a multidimensional setting may not be straightforward: for example, in models where durations are random, keeping track of synchronicity across different assets is not trivial to implement. For this reason, whereas single-asset models go to a great length to model randomness in durations, multiasset modeling has mostly focused on modeling of fixed-interval returns, the most well-known being Hasbrouck’s Vector AutoRegressive (VAR) [38] model. Yet, the connection between order flows across different assets is particularly relevant when considering indexes, futures and options, which cannot be considered in isolation and in which supply and demand are driven by events occurring in another market -the market for the components of the index or the underlying asset of the derivative. Such multi-asset limit order book models are very relevant for applications and their development represents a challenge.

More remains to be done to bridge the gap between microstructure models –which hinge on various behavioral assumptions about market participants strategies– and stochastic models, which are more operational and data-driven. The theoretical input from microstructure models may be used to design new stochastic models whose ingredients will have a better economic interpretation. The study of heavy-traffic limits and diffusion limits of discrete order book models seems to be a promising direction of research. This approach restores analytical tractability into the models and allows to connect microstructural features to statistical properties of prices and order flow, which are observable and may be used in the empirical validation of models.

We have focused in this survey on stochastic models and related statistical techniques for high frequency data. Other techniques, though less present in the research literature – machine learning methods, wavelet-based methods, nonparametric pattern recognition methods, large scale data mining techniques, methods from cryptography– have been extensively applied by practitioners for prediction and pattern detection in high frequency data. These methods have contributed in some cases to the development of successful trading algorithms, which may or may not be generalizable to other data sets, but it remains to be seen whether they can also provide interesting fundamental insights into the dynamics of supply, demand and price in financial markets.

# REFERENCES

[1] A. ALFONSI, A. SCHIED, AND A. SCHULZ, Optimal execution strategies in limit order books with general shape function, Quantitative Finance, 10 (2010), pp. 143–157.   
[2] R. ALMGREN AND N. CHRISS, Optimal execution of portfolio transactions, Journal of Risk, 3 (2000), pp. 5– 39.   
[3] R. ALMGREN, C. THUM, E. HAUPTMANN, AND H. LI, Market impact, Risk, 18 (2005), p. 57.   
[4] A. ANDERSEN, R. CONT, AND E. VINKOVSKAYA, A point process model for the high-frequency dynamics of a limit order book, Financial Engineering Report 2010- 08, Columbia University, 2010.   
[5] T. ANDERSEN AND T. BOLLERSLEV, Answering the skeptics: Yes, standard volatility models do provide accurate forecasts, International Economic Review, 39 (1998), pp. 885–905.   
[6] T. ANDERSEN AND T. BOLLERSLEV, Towards a unified framework for high and low frequency return volatility modeling, Statistica Neerlandica, 52 (1998), pp. 273–302.   
[7] T. ANDERSEN, T. BOLLERSLEV, AND N. MEDDAHI, Correcting the errors: Volatility forecast evaluation using high-frequency data and realized volatilities, Econometrica, 73 (2005), pp. 279–296.   
[8] M. AVELLANEDA AND S. STOIKOV, High-frequency trading in a limit order book, Quantitative Finance, 8 (2008), pp. 217–224.   
[9] M. AVELLANEDA, S. STOIKOV, AND J. REED, Forecasting prices from level-i quotes in the presence of hidden liquidity, working paper, 2010.   
[10] L. BAUWENS AND N. HAUTSCH, Modelling financial high frequency data using point processes, in Handbook of Financial Time series, T.G. Andersen et al., ed., Springer, 2009, pp. 953–979.   
[11] D. BERTSIMAS AND A. LO, Optimal control of execution costs, Journal of Financial Markets, 1 (1998), pp. 1– 50.   
[12] B. BIAIS, L. GLOSTEN, AND C. SPATT, Market microstructure: A survey of microfoundations, empirical results and policy implications, Journal of Financial Markets, 8 (2005), pp. 217–264.   
[13] B. BIAIS, P. HILLION, AND C. SPATT, An empirical analysis of the order flow and order book in the paris bourse, Journal of Finance, 50 (1995), pp. 1655–1689.   
[14] J.-P. BOUCHAUD, D. FARMER, AND F. LILLO, How markets slowly digest changes in supply and demand, in Handbook of Financial Markets: Dynamics and Evolution, T. Hens and K. Schenk-Hoppe, eds., Elsevier: Academic Press, 2008.   
[15] J.-P. BOUCHAUD, M. MEZARD ´ , AND M. POTTERS, Statistical properties of stock order books: empirical results and models, Quantitative Finance, 2 (2002), pp. 251–256.   
[16] CFTC AND SEC, Findings regarding the market events of May 6, 2010, Report to the joint advisory committee on emerging regulatory issues, CFTC, 2010.   
[17] R. CONT, Empirical properties of asset returns: stylized facts and statistical issues, Quantitative Finance, 1 (2001), pp. 223–236.   
[18] R. CONT AND A. DE LARRARD, Linking volatility with order flow: heavy traffic approximations and diffusion limits of order book dynamics, working paper, 2010.   
[19] R. CONT AND A. DE LARRARD, Price dynamics in a markovian limit order market, http://ssrn.com/abstract=1735338, 2010.   
[20] R. CONT, A. KUKANOV, AND S. STOIKOV, The price impact of order book events, working paper, Columbia University, 2010.   
[21] R. CONT, S. STOIKOV, AND R. TALREJA, A stochastic model for order book dynamics, Operations Research, 58 (2010), pp. 549–563.

[22] R. CONT AND P. TANKOV, Financial Modelling with Jump Processes, Chapman & Hall/CRC, 2003.

[23] Z. EISLER, J.-P. BOUCHAUD, AND J. KOCKELKOREN, The price impact of order book events: market orders, limit orders and cancellations, working paper, 2010.

[24] R. ENGLE AND J. RUSSELL, Autoregressive conditional duration: a new model for irregularly-spaced transaction data., Econometrica, v66 (1998), pp. 1127– 1162.

[25] R. F. ENGLE, The Econometrics of Ultra-High Frequency Data, Econometrica, 68 (2000), pp. 1–22.

[26] R. F. ENGLE, R. FERSTENBERG, AND J. RUSSELL, Measuring and modeling execution cost and risk. NYU Working Paper No. FIN-06-044, 2006.

[27] R. F. ENGLE AND A. LUNDE, Trades and Quotes: A Bivariate Point Process, Journal of Financial Econometrics, 1 (2003), pp. 159–188.

[28] M. EVANS AND R. LYONS, Order flow and exchange rate dynamics, Journal of Political Economy, 110 (2002), p. 170.

[29] J. D. FARMER, L. GILLEMOT, F. LILLO, S. MIKE, AND A. SEN, What really causes large price changes?, Quantitative Finance, 4 (2004), pp. 383–397.

[30] T. FOUCAULT, O. KADAN, AND E. KANDEL, Limit order book as a market for liquidity, Review of Financial Studies, 18 (2005), pp. 1171–1217.

[31] X. GABAIX, P. GOPIKRISHNAN, V. PLEROU, AND H. STANLEY, A theory of power-law distributions in financial market fluctuations, Nature, 423 (2003), p. 267.

[32] E. GHYSELS AND J. JASIAK, GARCH for irregularly spaced financial data: the ACD-GARCH model, Studies in Nonlinear Dynamics and Econometrics, 2 (1998), pp. 133–149.

[33] L. GLOSTEN, Is the limit order book inevitable?, Journal of Finance, 49 (1994), pp. 1127–1161.

[34] C. GOURIEROUX, J. JASIAK, AND G. LE FOL, Intraday market activity, Journal of Financial Markets, 2 (1999), pp. 193–226.

[35] L. E. HARRIS AND V. PANCHAPAGESAN, The information content of the limit order book: evidence from NYSE specialist trading decisions, Journal of Financial Markets, 8 (2005), pp. 25–67.

[36] J. HARRISON AND V. NGUYEN, Brownian models of multiclass queueing networks: Current status and open problems, Queueing Systems, 13 (1993), pp. 5–40.

[37] J. HASBROUCK, Measuring the information content of stock trades, Journal of Finance, 46 (1991), pp. 179– 207.

[38] J. HASBROUCK, Empirical Market Microstructure, Oxford University Press, 2007.

[39] N. HAUTSCH, Modelling irregularly spaced financial data, vol. 539 of Lecture Notes in Economics and Mathematical Systems, Springer, 2004.

[40] P. HEWLETT, Clustering of order arrivals, price impact and trade path optimisation, working paper, OCIAM, 2006.

[41] B. HOLLIFIELD, R. A. MILLER, AND P. SANDAS, Empirical analysis of limit order markets, Review of Economic Studies, 71 (2004), pp. 1027–1063.

[42] D. KEIM AND A. MADHAVAN, The upstairs market for large-block transactions: Analysis and measurement of price effects, Review of Financial Studies, 9 (1996), pp. 1–36.

[43] A. KEMPF AND O. KORN, Market depth and order size, Journal of Financial Markets, 2 (1999), p. 29.

[44] A. KIRILENKO, A. KYLE, M. SAMADI, AND T. TUZUN, The flash crash: The impact of high frequency trading on an electronic market, ssrn working paper, 2010.

[45] A. KYLE, Continuous auctions and insider trading, Econometrica, 53 (1985), p. 1315.

[46] J. LARGE AND J. FIELD, Pro-Rata Matching in One-Tick Markets, tech. report, Oxford Man Institute.

[47] C. LEE AND M. READY, Inferring trade direction from intraday data, Journal of Finance, 46 (1991), pp. 733– 746.

[48] H. MENDELSON, Market behavior in a clearing house, Econometrica, (1982), pp. 1505–1524.

[49] A. OBIZHAEVA, Portfolio transitions and stock price dynamics, working paper, University of Maryland, 2009.

[50] A. OBIZHAEVA AND J. WANG, Optimal trading strategy and supply/demand dynamics, working paper, MIT, 2006.

[51] C. PARLOUR, Price dynamics in limit order markets, Review of Financial Studies, 11 (1998), pp. 789–816.

[52] V. PLEROU, P. GOPIKRISHNAN, X. GABAIX, AND H. STANLEY, Quantifying stock-price response to demand fluctuations, Physical Review E, 66 (2002), p. 027104.

[53] M. POTTERS AND J. BOUCHAUD, More statistical properties of order books and price impact, Physica A, 324 (2003), p. 133 140.   
[54] I. ROSU, A dynamic model of the limit order book, Review of Financial Studies, 22 (2009), pp. 4601–4641.   
[55] E. SMITH, J. D. FARMER, L. GILLEMOT, AND S. KRISHNAMURTHY, Statistical theory of the continuous double auction, Quantitative Finance, 3 (2003), pp. 481–514.   
[56] N. TORRE AND M. FERRARI, The Market Impact Model, BARRA, 1997.   
[57] W. WHITT, Stochastic Process Limits, Springer Verlag, 2002.