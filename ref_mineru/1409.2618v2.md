# Optimal Execution with Dynamic Order Flow Imbalance

Kyle Bechler Statistics and Applied Probability University of California, Santa Barbara

Michael Ludkovski Statistics and Applied Probability University of California, Santa Barbara

October 21, 2014

# Abstract

We examine optimal execution models that take into account both market microstructure impact and informational costs. Informational footprint is related to order flow and is represented by the trader’s influence on the flow imbalance process, while microstructure influence is captured by instantaneous price impact. We propose a continuous-time stochastic control problem that balances between these two costs. Incorporating order flow imbalance leads to the consideration of the current market state and specifically whether one’s orders lean with or against the prevailing order flow, key components often ignored by execution models in the literature. In particular, to react to changing order flow, we endogenize the trading horizon $T$ . After developing the general indefinite-horizon formulation, we investigate several tractable approximations that sequentially optimize over price impact and over $T$ . These approximations, especially a dynamic version based on receding horizon control, are shown to be very accurate and connect to the prevailing Almgren-Chriss framework. We also discuss features of empirical order flow and links between our model and “Optimal Execution Horizon” by Easley et al (Mathematical Finance, 2013).

Keywords: optimal execution, order flow, limit order books, information footprint

# 1 Introduction

The concept of optimal execution in financial markets is concerned with realizing the best value for the asset traded via optimization with respect to the incurred trading costs. These costs are driven by two fundamental components: market microstructure frictions and informational asymmetries. Market microstructure implies that market liquidity is finite and trades generate price impact. Informational costs reflect the fact that trades are observed by other participants who will then adjust their own strategies and views of the asset value and create adverse selection.

The complexity of today’s market micro-structure has led to a wide variety of approaches that focus on different facets of the problem. The seminal work of Almgren and Chriss [3, 4, 5] originated the framework of diffusive mid-price models where trading is continuous and price impact depends on the trading rate. Extensions of this model to account for limit order book resiliency can be found in [1], and for other transient price impacts in [22]. Alternatively, focusing on trading via limit orders, [7, 12, 24] have investigated execution under fill risk with discontinuous inventory trajectories. Hybrid models that mix limit and market orders appear in [11, 25, 26].

The above approaches provide frameworks for modelling price impact and execution costs but say nothing about informational costs. While there are some studies [28] that analyze adverse selection, so far research in this direction has been mostly confined to empirical studies of long-term (“permanent”) price impact. For example, Bouchaud et al. [9, 8] and Farmer et al. [19] analyze the characteristics of order flow data, asserting that order flow is predictable over time-scales of up to several days and that order flow plays an important role in the formation of prices. A notable recent contribution is by Easley at al. [17], who minimize a combination of information leakage and volatility risk in a static setting. Importantly, [17] assert that the liquidity process is sensitive to the execution strategy of the trader with the linkage through order flow. Specifically, the theory of market toxicity [16] implies that the expected absolute imbalance in order flow can be used to approximate the probability that a trade is information based. Therefore one-sided markets are likely to create adverse selection and consequently in such toxic conditions market makers widen the range at which they provide liquidity. A qualitatively similar result was shown by Cartea et al. [12] where the market maker’s order placement shifts deeper into the limit order book in response to one-sided market order flow. It follows that by influencing the order flow, the trader’s actions create a transient impact on market toxicity and hence execution costs.

In the present paper we bridge the above ideas within a combined dynamic model. We maintain the basic features of the Almgren-Chriss setup, including continuous trading and (quadratic) instantaneous price impact arising from market microstructure. However, we also incorporate a novel stochastic factor ( $Y _ { t }$ ) for order flow, which is similarly impacted from executed trades. The transient impact on $Y$ represents the informational footprint of the trader and introduces a feedback loop into the problem. It allows the trader to react to changing market conditions, in particular markets changing from being buy-driven to ask-driven and vice versa. This order flow feedback is anecdotally incorporated in most implemented practitioner algorithms and has been questioned in connection with liquidity crises (notably the Flash Crash, see [27]). We use our model to examine the dynamic problem of Optimal Execution Horizon that was introduced in a 1-period version by Easley et al. [17]. Thus, in contrast to Almgren-Chriss and typical execution models, we endogenize the execution horizon which is optimally chosen depending on market liquidity. Intuitively, trading should slow down when informational costs are high, and speed up when they are low. From that point of view, rather than a pure optimization problem, optimal execution is about trading-off price impact and information leakage against timing risk. Moreover, endogenizing execution horizon generates dynamic execution strategies even if the underlying asset value is a martingale. This allows to obtain inherently adaptive trading in contrast to deterministic strategies in popular models (e.g. [1, 4, 5]) that consider only price impact.

The rest of the paper is organized as follows. In Section 2 we setup our dynamic order flow model and derive the associated HJB equation with endogenous horizon. In Section 3 we address the respective fixed horizon problem which allows us to obtain several closedform approximate strategies once we optimize over the execution horizon. The latter is done in Section 4 where we also compare several strategies that result. Section 5 looks at some stylized facts about order flow and discusses calibration.

# 2 The Optimal Execution Problem

The problem in view is liquidation of a position of size $x = x _ { 0 }$ . We assume a continuoustime setup, with trading taking place continuously and via infinitesimal amounts. Namely, the trader trades $\dot { x } _ { t } d t$ shares at time $t$ , so that his inventory $x _ { t }$ follows the dynamics

$$
d x _ { t } = { \dot { x } } _ { t } d t .
$$

Execution ends at the random horizon

$$
T _ { 0 } : = \operatorname* { i n f } \{ t \geq 0 : x _ { t } = 0 \} ,
$$

whereupon inventory is exhausted. Throughout, time is supposed to be in traded-volume units.

Beyond the inventory $x _ { t }$ , the main state variable of our model is the order flow imbalance $Y _ { t }$ . The order flow imbalance captures the intrinsic fluctuations among supply and demand for the security realized by the unequal amounts of buyer- and seller-initiated orders and trades. On the short time-scale (intra-day to several days) it is empirically quasistationary, in the sense that the observed volume is several orders of magnitude larger than the deviations in net imbalance, cf. Section 5.1. Moreover it is highly noisy and appears to be mean-reverting to zero. Therefore, we choose to model $( Y _ { t } )$ in terms of a mean-zero stationary process.

Let $Y ^ { 0 }$ represent the flow imbalance in the absence of the trader. As a starting point we take $( Y _ { t } ^ { 0 } )$ to be an Ornstein-Uhlenbeck process with mean-reversion parameter $\beta$ ,

$$
d Y _ { t } ^ { 0 } = - \beta Y _ { t } ^ { 0 } d t + \sigma d W _ { t } .
$$

The mean-reversion strength $\beta$ controls the time-scale of the memory in flow imbalance, while the volatility $\sigma$ controls the size of fluctuations in flow imbalance. Since imbalance is intuitively in the range $[ - 1 , 1 ]$ (representing markets with $1 0 0 \%$ buyers, and $1 0 0 \%$ sellers respectively), the fraction $\sigma ^ { 2 } / ( 2 \beta )$ , which is the stationary variance of $Y ^ { 0 }$ , should be on the order of $\sigma ^ { 2 } / ( 2 \beta ) \in [ 0 . 0 1 , 0 . 2 ]$ ].

The execution program of the trader introduces a downward pressure on the order imbalance process as a result of his selling. The information leaked by the trader’s action creates a drift in the realized order imbalance $Y _ { t }$ , pushing it below $Y _ { t } ^ { 0 }$ . By displacing other orders, the trader impacts expectations regarding future order flows and generates adverse selection. A more precise description of this mechanism using (more realistic) discrete-time setup and discrete trades is presented in Section 5.2. We postulate that

$$
d Y _ { t } = - \beta Y _ { t } d t - \phi ( \dot { x } _ { t } ) d t + \sigma d W _ { t } ,
$$

where $\phi ( \cdot )$ captures the information leakage. Observe that

$$
Y _ { t } = Y _ { t } ^ { 0 } + \int _ { 0 } ^ { t } e ^ { \beta ( s - t ) } \phi ( { \dot { x } } _ { s } ) d s ,
$$

so the execution program generates an exponentially decaying impact on $Y ^ { 0 }$ . We assume that $\phi : \mathbb { R } _ { + } \to \mathbb { R } _ { + }$ is non-decreasing with $\phi ( 0 ) = 0$ . The three main cases we consider are: $\phi ( { \dot { x } } _ { t } ) \equiv 0$ corresponding to zero informational footprint; $\phi ( { \dot { x } } _ { t } ) = \phi _ { t }$ corresponding to deterministic (but non-zero) impact; and proportional (linear) impact $\phi ( { \dot { x } } _ { t } ) = \eta { \dot { x } } _ { t }$ . Linear impact is computationally convenient, though not necessarily the most realistic reflection of how a trader’s activity might influence expectations regarding order flow. Impact that depends on the current value of the flow imbalance is investigated in Section 5.2.

The information leakage is “abstract” in the sense that it does not generate trading costs per se. However, in line with [17] we assume that there are adverse selection costs associated with trading in an unbalanced market. Here we assume that this cost is symmetric in $Y _ { t }$ (but note that agent’s actions induce only one-sided effects of $Y _ { t }$ ); for tractability we take it quadratic. In addition, we carry through the two costs from Almgren-Chriss: instantaneous impact $g ( \dot { x } _ { t } )$ of trading at rate $\dot { x } _ { t }$ , and inventory cost $\lambda ( x _ { t } )$ for carrying a position of $x _ { t }$ at $t$ .

The continuous-time execution problem is to minimize the sum of the corresponding expected execution costs

$$
\operatorname* { i n f } _ { ( x _ { t } ) \in \mathcal { X } ( x ) } \mathbb { E } _ { x , y } \left[ \int _ { 0 } ^ { T _ { 0 } } \left( g ( \dot { x } _ { s } ) + \kappa Y _ { s } ^ { 2 } + \lambda ( x _ { s } ) \right) d s \right] ,
$$

over admissible execution strategies $( x _ { t } ) \in \mathcal { X } ( x )$ . The above expectation is conditional on an initial value $Y _ { 0 } = y$ and initial inventory $x$ which induce the measure $\mathbb { P } _ { x , y }$ . The horizon $T _ { 0 }$ is part of the solution, so that the optimization is formally taking place on the whole future $s \in [ 0 , \infty )$ . While the first term in (5) incentivizes the trader to slow down in order to reduce his immediate liquidity costs, the next two terms of the cost functional are such that under certain market conditions, it may be optimal to accelerate trading in order to exit the market sooner.

Let $\mathcal { F } _ { t } = \sigma ( Y _ { s } : s \le t )$ denote the filtration generated by $Y$ . Admissible strategies $( x _ { t } ) \in \mathcal { X } ( x )$ , consist of $( \mathcal { F } _ { t } )$ -progressively measurable, absolutely continuous trajectories $t \mapsto x _ { t }$ , such that $x _ { 0 } = x$ , $\scriptstyle \operatorname* { l i m } _ { t \to \infty } x _ { t } = 0$ and $\begin{array} { r } { \int _ { 0 } ^ { \infty } g ( \dot { x } _ { s } ) d s < \infty \mathrm { ~ l ~ } } \end{array}$ P-a.s. We also require the following assumptions on the model ingredients:

• Instantaneous impact function $g : \mathbb { R } _ { + } \mapsto \mathbb { R } _ { + }$ is strictly convex;

• The informational cost parameter $\kappa \geq 0$ ;   
• Inventory risk $\lambda : \mathbb { R } _ { + } \mapsto \mathbb { R } _ { + }$ is non-decreasing in $x$ .

The cost functional in (5) is consistent with other approaches taken in the literature. The assumption that $g ( \dot { x } )$ is convex matches the empirical fact that market participants like to divide a large “parent” order into smaller orders in order to reduce trading costs. In limit order books (LOB), $g ( \cdot )$ represents the depth of the LOB on the ask-side. If this depth is constant, the instantaneous trading cost is quadratic $g ( \dot { x } ) = \dot { x } ^ { 2 }$ (by rescaling $\kappa$ and $\lambda$ we assume without loss of generality that the leading coefficient is 1). This assumption also appears in [4, 11, 20] among others. Because our primary focus is on informational costs, we assume for the moment that there are no other transient/permanent impacts on the asset value $S _ { t }$ and further posit that strategies are independent of asset dynamics. In Section 5.3 we return to this issue and discuss extensions that allow for positive correlation between asset price dynamics $( S _ { t } )$ and order flow ( $Y _ { t }$ ).

Our second cost term $\kappa Y _ { t } ^ { 2 }$ is motivated primarily by the model presented in [17] and captures the cost of information leakage. The main premise is that liquidity costs (e.g. likelihood of adverse selection) are higher in markets with unbalanced flow. However, unlike [17], our model incorporates mean reversion and stochasticity in the flow imbalance process ( $Y _ { t }$ ). So the impact being modelled by this term is transient, and somewhat related to models that investigate resiliency in the limit order book [1, 22]. For other papers that considered stochastic execution costs see [3].

The last term $\lambda ( x _ { t } )$ in (5) represents timing risk, penalizing the trader for leaving his position exposed to adverse price movements. Several risk terms have been applied within the execution literature. The seminal work by Almgren and Chriss, which optimizes over a mean-variance cost functional, reduces to a calculus of variations problem and the risk term $\lambda ( x ) = c x ^ { 2 }$ . Gatheral and Schied [20] investigated a time-weighted value-at-risk measure proportional to $\lambda ( x ) = c x$ . In the context of timing risk, $\lambda ( x ) = c$ generates costs that are proportional to execution time which is a non-trivial modification once the horizon $T _ { 0 }$ is not fixed.

Remark 1. In (5) we restrict our attention to pure selling strategies, so that $x _ { t }$ is nonincreasing. As such all our cost functionals are only defined for positive selling rates. Depending on the strength of information leakage, it is possible that the constraint $\dot { x } _ { t } \geq 0$ is binding, i.e. execution is suspended until market conditions improve. It is beyond the scope of this paper to extend the framework to two-sided trading algorithms that raise the issue of potential market manipulation [2, 22].

# 2.1 Execution Costs in Limit Order Books

Before proceeding with solving (5), we discuss the connections between our setup and trading in electronic LOB markets that currently dominate equity trading in US and Europe. Trading in a LOB leaves a double footprint, both in space and in time. In space, an executed sell order consumes the matching standing limit orders on the bid side. (In our framework since there is no fill risk all trades are assumed to be market orders.) This shortens the respective queues on the bid side of the book and hence can move the best-bid. This is the aforementioned price impact represented by $g ( \dot { x } )$ . Temporally, the executed order is recorded by other participants on the exchange message ticker affecting the observed order flow. The effect is both direct (the immediate fact that a sell order of $\dot { x } _ { s }$ shares was executed), and indirect (the fact that market participants adjust their statistical view of the order flow over time). Thus, to the extent that market participants monitor the ticker (rather than just observe the snapshots of the LOB), an order generates informational footprint. There is a lot of anectodal evidence that many HFT algorithms indeed track the time series of orders placed (for example to detect temporal trading patterns) and hence will react to this footprint. This implies that information costs are at least as important as instantaneous liquidity consumption.

Modelling order flow remains in its infancy. Indeed, while spatially the LOB can be easily summarized as a collection of queues (modeled via say the depth function [1]), the time series of the exchange ticker are much more complicated as market participants process multiple streams of information. There are both executed trades (i.e. trades triggered from market orders) and limit orders, which themselves can be added, cancelled, or modified in other ways depending on the exchange. Orders further carry volume, time stamp and possibly participant type (and limit orders can be entered at any level of the LOB). These multi-dimensional data is moreover coupled in nontrivial ways, with temporal links both within series (e.g. auto-correlation in the inter-order durations) and across series (e.g. executed market orders tend to increase the arrival rate of limit orders at the touch). See for example a recent model of Cartea et al. [12] who fitted cross-exciting Hawkes processes to the basic order flow at the best-bid and best-ask queues. Given this challenges, our proposal to model order flow by a Ornstein-Uhlenbeck process is a compromise that will obviously need more adjustments before calibration to actual data. In Section 5.1 we return to this question with some empirical stylized facts about order flow.

Remark 2. In this paper we focus on the temporal order flow and its associated imbalance that was conjectured by Easley et al. [15, 16, 17] to be related to market toxicity. Other authors, such as [13], have used the terminology of order flow imbalance (or just order imbalance) for a different object, namely “spatial” order imbalance. Namely, motivated by queueing notation, they mean the net difference between standing limit orders at the best-bid and best-ask. As shown by [13] and [14], order imbalance is predictive of the next price move (i.e. correlated with the probability of the next price to be an up-tick or a down-tick) and is closely monitored by most HFT algorithms. While the LOB depth is related to the history of submitted limit orders, the relationship is highly complicated (due to shifting mid-price, hidden orders, etc.). Consequently, our order flow imbalance is not meant to be tied directly to the LOB depth or any immediate LOB properties, but rather provide a temporal summary of recent orders submitted.

# 2.2 HJB Formulation

To minimize (5) we adopt the standard stochastic control approach, utilizing the dynamic programming principle and Hamilton-Jacobi-Bellman (HJB) PDE. Within this framework strategies are defined by their rate of selling, $\alpha _ { t } : = - \dot { x } _ { t }$ and the class of admissible strategies $\boldsymbol { \mathcal { A } } ( \boldsymbol { x } )$ consists of all nonnegative $( \mathcal { F } _ { t } ) .$ -progressively measurable processes $( \alpha _ { t } ) _ { 0 \leq t \leq T _ { 0 } }$ for which

$$
x _ { t } ^ { \alpha } : = \left( x - \int _ { 0 } ^ { t } \alpha _ { s } \ : d s \right) _ { + } , \quad 0 \leq t ,
$$

belongs to $\mathcal { X } ( x )$ . The value function of our problem can be expressed as

$$
v ( x , y ) = \operatorname* { i n f } _ { ( \alpha _ { t } ) \in A ( x ) } \mathbb { E } _ { x , y } \left[ \int _ { 0 } ^ { T _ { 0 } } \left( g ( \alpha _ { s } ) + \kappa Y _ { s } ^ { 2 } + \lambda ( x _ { s } ^ { \alpha } ) \right) d s \right] .
$$

If it exists, we define the corresponding optimal strategy as $\alpha ^ { * } ( x , y )$ . For each path of underlying $Y _ { t } ^ { 0 }$ , $\alpha ^ { * }$ induces the realized execution horizon $T _ { 0 } ( x , y ) = \operatorname* { i n f } \{ t : x _ { t } ^ { \alpha ^ { * } } = 0 \}$ which is a random variable taking values in $[ 0 , \infty )$ .

Standard arguments suggest that the value function $v ( x , y )$ will satisfy a Hamilton-Jacobi-Bellman equation of the form

$$
0 = \frac { 1 } { 2 } \sigma ^ { 2 } v _ { y y } - \beta y v _ { y } + \kappa y ^ { 2 } + \lambda ( x ) + \operatorname * { i n f } _ { \alpha \geq 0 } \{ g ( \alpha ) - \alpha v _ { x } - \phi ( \alpha ) v _ { y } \} ,
$$

with the boundary condition $v ( 0 , y ) = 0$ for all $y$ . We observe that (7) is a nonlinear parabolic PDE in $( x , y )$ for which the corresponding theory (e.g. regarding existence of classical solutions) is rather limited.

For the remainder of the section we concentrate on the linear information leakage and quadratic price impact case $g ( \alpha ) \ = \ \alpha ^ { 2 }$ , $\phi ( \alpha ) ~ = ~ \eta \alpha$ . In that situation, the candidate optimizer in feedback form is

$$
\alpha ^ { * } ( x , y ) = \frac { v _ { x } + \eta v _ { y } } { 2 } .
$$

Substituting this feedback control into the PDE (7) we have

$$
0 = \frac { 1 } { 2 } \sigma ^ { 2 } v _ { y y } - \beta y v _ { y } + \kappa y ^ { 2 } + \lambda ( x ) - \left( \frac { v _ { x } + \eta v _ { y } } { 2 } \right) ^ { 2 } .
$$

Due to the state dependence of the class of admissible strategies $\boldsymbol { \mathcal { A } } ( \boldsymbol { x } )$ , the problem (6) is a finite-fuel control problem. As a result, there does not appear to be a tractable closed form solution which satisfies the zero boundary condition along $x = 0$ . In Appendix A we illustrate a relatively straightforward method for solving (9) numerically via a finite difference scheme.

To understand the feedback strategy in (8), we pause to consider the derivatives $v _ { x }$ and $v _ { y }$ . As we will see, $v _ { x }$ is always positive but $v _ { y }$ can be either positive or negative. Consequently, the candidate in (8) may fail to be non-negative.

Lemma 1. The map $x \mapsto v ( x , y )$ is strictly increasing for any $y$

Proof. Fix $x < x ^ { \prime } = x + \epsilon$ for a strictly positive $\epsilon$ and consider an ( $\epsilon$ -optimal) strategy $\alpha ^ { \epsilon }$ for $v ( x ^ { \prime } , y )$ . Let $T _ { x } : = \operatorname* { i n f } \{ t : x _ { t } ^ { \prime } = \epsilon \}$ be the random period to sell $x$ shares using $\alpha ^ { \epsilon }$ . Then by absolute continuity of $t \mapsto x _ { t } ^ { \prime }$ , $T _ { x } < T _ { 0 } ( x ^ { \prime } , y )$ . Moreover, $\alpha ^ { \prime } ( x , y ) : = \alpha _ { t } ^ { \epsilon } ( x ^ { \prime } , y ) 1 _ { \{ t \leq T _ { x } \} }$ is an admissible strategy for the initial conditions $( x , y )$ since it liquidates exactly $x ^ { \prime } - \epsilon = x$ shares. Using the fact that $\alpha ^ { \prime }$ is sub-optimal for $v ( x , y )$ and that the second and third terms in (5) are strictly positive almost surely, we find $v ( x , y ) \leq v ( x ^ { \prime } , y ; \alpha ^ { \prime } ) < v ( x ^ { \prime } , y )$ .

In (9), the horizon is indefinite and ultimate liquidation is only modelled through the boundary condition. Thus, understanding the realized execution horizon $T _ { 0 } ( x , y )$ is only possible implicitly. Moreover, the nonlinearities in (9) make analysis intractable. To achieve tractability we consider an approximate two-stage procedure. Thus, we first fix a horizon $T$ by imposing the constraint $T _ { 0 } = T$ . We then solve the resulting fixed-horizon problem to find the best strategy $\alpha ^ { * } ( T , x , y )$ and value function $v ( T , x , y )$ . In the second step, we optimize over $T$ , to find the statically optimal horizon $T ^ { * } ( x , y )$ . Finally, we build the semidynamic strategy $\tilde { \alpha } ( x _ { t } , y _ { t } ) = \alpha ^ { * } ( T ^ { * } ( x _ { t } , y _ { t } ) , x _ { t } , y _ { t } )$ . Thus, $\tilde { \alpha }$ recomputes $T ^ { * }$ as the state variables $( x _ { t } , y _ { t } )$ evolve and uses the corresponding static trading rate. This approach is analogous to the receding-horizon setup in nonlinear control [29]. Indeed, the initial use of $\alpha ^ { * } ( T ^ { * } ( x , y ) , x , y )$ at $t = 0$ corresponds to model predictive control and $\tilde { \alpha } ( x _ { t } , y _ { t } )$ then continuously rolls the initial condition because of the stochastic fluctuations encountered. The above plan is implemented in Sections 3 and 4 respectively. In the latter section we also compare the execution trajectories and resulting costs from the various strategies.

# 3 Linear Quadratic Setup on Finite Horizon

Fix $T < \infty$ . We consider the analogue of (7) on $[ 0 , T ]$ . To avoid confusion we let $u$ denote the value function when defined on the fixed horizon:

$$
u ( T , x , y ) = \operatorname* { i n f } _ { ( \alpha _ { t } ) \in A ( T , x ) } \mathbb { E } _ { x , y } \left[ \int _ { 0 } ^ { T } \alpha _ { s } ^ { 2 } + \kappa Y _ { s } ^ { 2 } + \lambda ( x _ { s } ^ { \alpha } ) d s \right] .
$$

For expository purposes, we use the time-to-maturity parametrization for $u$ so that the first argument $T$ represents time until the deadline. Strategies on $[ 0 , T ]$ are defined in similar fashion to those in Section 2 but with a constraint $x _ { T } = 0$ at the terminal time $T$ . Forced liquidation by $T$ is achieved by leveling an infinite penalty if not completed, leading to a singular initial condition of the form

$$
\operatorname* { l i m } _ { T \downarrow 0 } u ( T , x , y ) = { \left\{ \begin{array} { l l } { 0 } & { { \mathrm { i f ~ } } x = 0 } \\ { + \infty } & { { \mathrm { i f ~ } } x \neq 0 . } \end{array} \right. }
$$

Note that the second term in (10) continues accruing until the terminal time regardless of whether the liquidation is completed earlier. Therefore, instead of the boundary condition $v ( 0 , y ) = 0$ we have (due to zero being absorbing for $x _ { t }$ ) $\begin{array} { r } { u ( t , 0 , y ) = \mathbb { E } 0 , y [ \int _ { 0 } ^ { t } \kappa ( Y _ { S } ^ { 0 } ) ^ { 2 } d s ] } \end{array}$ ; see Lemma 3 for explicit formula for the latter expression.

To obtain explicit solutions to (10), the next section treats the case in which $\phi$ is independent of $\alpha$ over a fixed horizon. In other words, the trader may impact the order flow process, but impact can be modelled in a deterministic fashion. Section 3.2 then addresses the proportional footprint $\phi ( \alpha ) = \eta \alpha$ case, still over fixed time horizon. It will be shown that the strategies obtained in Sections 3.1-3.2 are not too suboptimal compared to the indefinite-horizon model laid out in Section 2.

# 3.1 Myopic Execution Strategies

In classical optimal execution models [1], [4] and [5], optimal execution rates are deterministic, i.e. $\alpha _ { t }$ is pre-determined. In this scenario, informational costs would also be deterministic. Therefore, we examine the case where $\phi ( \alpha )$ is independent of $\alpha$ (but possibly depends on time $t$ ). Under that assumption, we can separate the two terms in (5) since the dynamics of ( $Y _ { t }$ ) are not directly affected by the trader; the performance criterion simplifies to

$$
\operatorname* { i n f } _ { ( x _ { t } ) \in \mathcal { X } ( x ) } \left( \int _ { 0 } ^ { T } \dot { x } _ { s } ^ { 2 } + \lambda ( x _ { s } ) d s \right) + \int _ { 0 } ^ { T } \kappa \mathbb { E } _ { y } [ Y _ { s } ^ { 2 } ] d s .
$$

Because $( Y _ { t } )$ is independent of the control $\alpha$ , optimal strategies are defined only by the first term in (12). Consequently, the resulting $\left( \alpha _ { t } \right)$ is independent of $Y _ { t }$ and hence $t \mapsto x _ { t } ^ { * }$ is deterministic. Thus, strategies based on (12) are myopic in the sense that they entirely ignore the potential “footprint” left by the trader’s actions, instead focusing solely on instantaneous cost and inventory risks. The following Lemma, proven in Appendix B provides the solution to (12) for popular choices of inventory risk.

Lemma 2. Consider the calculus-of-variations problem of finding

$$
\mathcal { T } ( T , x ) : = \operatorname* { i n f } _ { ( x _ { t } ) } \int _ { 0 } ^ { T } ( \dot { x } _ { t } ^ { 2 } + \lambda ( x _ { t } ) ) d t
$$

where the minimization is over all absolutely continuous curves $t \mapsto x _ { t }$ with $x _ { 0 } = x$ , $x _ { T } = 0$ and under the constraint that $x _ { t }$ is non-increasing. Then the optimal “myopic” strategies

(with $\alpha _ { t } \equiv - { \dot { x } } _ { t }$ ) are

$$
\begin{array} { c c } { { } } & { { \left\{ \begin{array} { c } { { x _ { t } ^ { M L } = \displaystyle \frac { x ( T - t ) } { T } ; } } \\ { { \alpha _ { t } ^ { M L } = \displaystyle \frac { x } { T } ; } } \\ { { \chi ^ { M L } ( T , x ) = \displaystyle \frac { x ^ { 2 } } { T } , } } \end{array} \right\} } } & { { \mathrm { ~ i f ~ } \lambda ( x ) = 0 ; } } \\ { { \left\{ \begin{array} { c } { { x _ { t } ^ { M H } = \displaystyle \frac { x \sinh \left( \sqrt { c } ( T - t ) \right) } { \sinh \left( \sqrt { c } T \right) } ; } } \\ { { \alpha _ { t } ^ { M H } = \displaystyle \frac { \sqrt { c } x \coth \left( \sqrt { c } ( T - t ) \right) } { \sinh \left( \sqrt { c } T \right) } ; } } \\ { { \alpha _ { t } ^ { M H } = \displaystyle \frac { \sqrt { c } x \coth \left( \sqrt { c } ( T - t ) \right) } { \sinh \left( \sqrt { c } T \right) } ; } } \end{array} \right\} } } & { { \mathrm { ~ i f ~ } \lambda ( x ) = c x ^ { 2 } ; } } \\ { { \pi ^ { M H } ( T , x ) = \sqrt { c x ^ { 2 } \coth ( \sqrt { c } T ) } , } } \end{array}
$$

$$
\left\{ \begin{array} { c } { { x _ { t } ^ { M Q } = \left( \displaystyle \frac { c t ^ { 2 } } { 4 } - t \left( \displaystyle \frac { c \hat { T } } { 4 } + \displaystyle \frac { x } { \hat { T } } \right) + x \right) \mathbb { 1 } _ { \{ t < \hat { T } \} } ; } } \\ { { \alpha _ { t } ^ { M Q } = \left( \displaystyle \frac { c \hat { T } } { 4 } + \displaystyle \frac { x } { \hat { T } } - \displaystyle \frac { c t } { 2 } \right) \mathbb { 1 } _ { \{ t < \hat { T } \} } ; } } \\ { { { \cal T } ^ { M Q } ( T , x ) = \left( \displaystyle - \frac { c ^ { 2 } \hat { T } ^ { 3 } } { 4 8 } + \displaystyle \frac { c \hat { T } x } { 2 } + \displaystyle \frac { x ^ { 2 } } { \hat { T } } \right) ; } } \\ { { w h e r e \hat { T } : = \operatorname * { m i n } ( T , \displaystyle \frac { 2 \sqrt x } { \sqrt { c } } ) , } } \end{array} \right. \quad \quad \quad \quad \quad \quad \quad  \\  { \bar { { \cal T } } } ^ { M } { \cal T } ^ { \bar { M } } { } = { \cal T } .
$$

The superscripts $M L , M Q , M H$ respectively stand for the Myopic Linear, Quadratic and Hyperbolic models. The first case ML yields linear selling and the TWAP strategy, or if time is parametrized in volume time, the classic VWAP trading strategy. The second strategy $x _ { t } ^ { M H }$ and its corresponding rate $\alpha _ { t } ^ { M H }$ represents exponential selling, and is the optimal strategy presented in the original Almgren-Chriss model [4]. This risk term results from the trader’s effort to minimize the variance of liquidation cost. From the perspective of an inventory risk measure, one natural alternative is $\lambda ( x _ { s } ) = c x _ { s }$ , which has the attractive property of being proportional to value-at-risk and results in a selling strategy $x _ { t } ^ { M Q }$ that is quadratic in $t$ . Yet as explained for a similar problem in [20], buying might result with position size small relative to $T$ . Imposing the constraint that $x _ { t } ^ { M Q }$ is decreasing then leads to the modified solution (15) which in the case $\hat { T } < T$ causes liquidation to end prior to the terminal time $T$ .

Figure 1 details the three execution curves described in Lemma 2 for $x = 3$ and $T = 3$ . Compared to the VWAP strategy $x ^ { M L }$ , the non-zero inventory risk terms in strategies $x ^ { M H }$ and $x ^ { M Q }$ lead to higher rates of selling initially. The execution rate in $x ^ { M H }$ is proportional to x, cf. (14) and liquidation occurs exactly at T . In contrast, as xMt becomes small, the linear risk term cxMt becomes more punitive and it may be optimal to end liquidation prior to time $T$ . Figure 1 shows inventory $x _ { t } ^ { M Q }$ reaching $0$ at time ${ \hat { T } } = { \sqrt { 6 } }$ as defined in (15).

![](images/6d6f70a19dc6c698a418286b9f49c3adcce1e9f81626fed5c72131a005a3e4d1.jpg)  
Figure 1: Optimal trajectories from Lemma 2. Figure drawn for initial inventory √ $x = 3$ , horizon T = 3, and c = 2. This leads to Tˆ = 2 x √ $\begin{array} { r } { \hat { T } = \frac { 2 \sqrt { x } } { \sqrt { c } } = 2 . 4 5 } \end{array}$ in the quadratic scenario $x ^ { M Q }$ of (15).

We now turn our attention to the expected execution costs which arise from the order flow imbalance. Fixing $\left( \alpha _ { t } ^ { * } \right)$ , we can view the corresponding information impact $\phi ( \alpha _ { t } ^ { * } )$ also as a deterministic function of $t$ , allowing direct evaluation of the second term in (12) using the explicitly available Gaussian distribution of $Y _ { t }$ .

Lemma 3. Given a deterministic, time-dependent flow impact $\phi ( { \boldsymbol { \alpha } } _ { t } ) = \phi _ { t }$ , and $Y _ { 0 } = y$ , $Y _ { t }$ has the second moment

$$
\mathbb { E } _ { y } \left[ Y _ { t } ^ { 2 } \right] = \mu _ { t } ^ { 2 } + \sigma _ { t } ^ { 2 } ,
$$

where

$$
\left\{ \begin{array} { l l } { \displaystyle \mu _ { t } = y e ^ { - \beta t } - \int _ { 0 } ^ { t } e ^ { - \beta ( t - s ) } \phi _ { s } d s , } \\ { \displaystyle \sigma _ { t } ^ { 2 } = \frac { \sigma ^ { 2 } } { 2 \beta } ( 1 - e ^ { - 2 \beta t } ) . } \end{array} \right.
$$

Lemma 3 can be verified by directly solving the SDE (3) and recalling the Gaussian distribution of $Y _ { t }$ .

Putting everything together we obtain the expected total cost for the family of myopic execution strategies in Proposition 1. We reiterate that while realized costs instantaneously depend on the stochastic process $( Y _ { t } )$ , strategies in this section are purely deterministic and do not adapt to ( $Y _ { t }$ ). The solutions below are labeled according to the form of $\lambda ( x )$ ; while formally the two terms in (12) are decoupled, it is of course logical to match the resulting solution $\mathcal { L }$ of the instantaneous price-impact part with the corresponding expectation of $\mathbb { E } _ { y } [ \int _ { 0 } ^ { T } Y _ { s } ^ { 2 } d s ]$ , which is the convention we follow in Proposition 1.

Proposition 1. Suppose that $\phi _ { t } ( \alpha ) = \phi _ { t }$ . The corresponding value function u is given by

$$
u ^ { M } ( T , x , y ) = \boldsymbol { \mathcal { I } } ( T , x ) + \mathcal { O } ( T , x , y ) ,
$$

where $\mathcal { T }$ is defined in (13)-(15) and $\mathcal { O } = \kappa \int _ { 0 } ^ { T } ( \mu _ { t } ^ { 2 } + \sigma _ { t } ^ { 2 } ) d t$ from Lemma $\mathcal { B }$ is

$$
\begin{array} { c c } { { \displaystyle { \mathcal { O } } ^ { 0 } ( T , x , y ) = \frac { \kappa y ^ { 2 } } { 2 \beta } \left( 1 - e ^ { - 2 \beta T } \right) + \frac { \kappa \sigma ^ { 2 } } { 4 \beta ^ { 2 } } \left( 2 \beta T + e ^ { - 2 \beta T } - 1 \right) } } & { { i f \phi _ { t } \equiv 0 ; } } \\ { { \displaystyle { \mathcal { O } } ^ { M L } ( T , x , y ) = { \mathcal { O } } ^ { 0 } ( T , x , y ) + \frac { \kappa \eta x y } { \beta ^ { 2 } T } \left( 2 e ^ { - \beta T } - 1 - e ^ { - 2 \beta T } \right) } } & { { } } \\ { { + \frac { \kappa \eta ^ { 2 } x ^ { 2 } } { 2 \beta ^ { 3 } T ^ { 2 } } \left( 2 \beta T + 4 e ^ { - \beta T } - e ^ { - 2 \beta T } - 3 \right) } } & { { i f \phi _ { t } = \eta \alpha _ { t } ^ { M L } } } \end{array}
$$

Closed form expressions are also available for $\mathcal { O } ^ { M Q }$ and $\mathcal { O } ^ { M H }$ , see Appendix $C$

Thus, the overall cost of liquidation has two components: the $\boldsymbol { \mathcal { T } } ( \boldsymbol { T } , \boldsymbol { x } )$ term that depends only on $( T , x )$ , and the informational footprint term $\mathcal { O } ( T , x , y )$ that also depends on $y$ . In terms of $x$ , $\mathcal { O }$ is constant if $\phi _ { t } ~ = ~ 0$ , linear if $\phi _ { t } = \eta \alpha ^ { M L }$ , and quadratic otherwise. As a function of $y$ , $\mathcal { O }$ is quadratic thanks to the linear dynamics of $( Y _ { t } )$ and quadratic informational cost. Financially, the $y ^ { 2 }$ term represents higher costs due to trading in an unbalanced market, while the $y$ -term adjusts to the fact that selling in a market dominated by buyers is favorable to competing with other sellers for scarce liquidity. The following Corollary shows that the “best” level of $y$ is positive (or 0 if $\phi _ { t } = 0$ ). Intuitively, it is best to begin trading in an environment with positive order flow so that the trader’s selling activity pushes the order imbalance towards 0 and reduces informational costs.

Corollary 1. Suppose that $\phi _ { t } ( \alpha ) ~ = ~ \phi _ { t } ~ \ge ~ 0$ . Then the flow imbalance that minimizes expected execution cost is non-negative, $\mathrm { a r g m i n } _ { y } \left\{ u ( T , x , y ) \right\} \geq 0$ for any $T , x$ .

Proof. As already discussed, $u ^ { M } ( T , x , y )$ is quadratic in $y$ and the coefficient of $y ^ { 2 }$ is always as in (19). By inspection it is positive. The dependence on $y$ comes from the $\mathcal { O }$ terms that are of the form

$$
\mathcal { O } ( T , x , y ) = \kappa \int _ { 0 } ^ { T } ( y e ^ { - \beta t } - A _ { t } ) ^ { 2 } + \sigma _ { t } ^ { 2 } d t
$$

where $A _ { t } ~ \geq ~ 0$ (strictly positive as soon as $\phi _ { t } ~ > ~ 0$ on an interval of positive measure, cf. (40)). It follows that the coefficient of $y ^ { 2 }$ in $u ^ { M } ( T , x , y )$ is $\kappa \int _ { 0 } ^ { T } e ^ { - 2 \beta t } d t > 0$ and of $y$ is $\begin{array} { r } { - \int _ { 0 } ^ { T } 2 \kappa e ^ { - \beta t } A _ { t } d t \leq 0 } \end{array}$ . Thus, setting $\partial _ { y } u ^ { M } ( T , x , y ) = 0 \quad$ and solving for $y$ yields a non-negative result. □

# 3.2 Dynamic Execution Strategies

We now return to the problem in (10), letting $\phi ( \alpha _ { t } ) = \eta \alpha _ { t }$ . The optimal dynamic strategy is adapted to the order flow imbalance process ( $Y _ { t }$ ) and the trader’s rate of selling directly influences $( Y _ { t } )$ . To avoid confusion we will denote dynamic strategies and expected costs by $\alpha _ { t } ^ { D }$ and $u ^ { D }$ , respectively. The HJB PDE for $u ^ { D } ( T , x , y )$ is

$$
u _ { T } ^ { D } = \frac { 1 } { 2 } \sigma ^ { 2 } u _ { y y } ^ { D } - \beta y u _ { y } ^ { D } + \kappa y ^ { 2 } + \lambda ( x ) + \operatorname* { i n f } _ { \alpha \ge 0 } \left\{ g ( \alpha ) - \alpha u _ { x } ^ { D } - \eta \alpha u _ { y } ^ { D } \right\} ,
$$

with $u ^ { D } ( 0 , x , y ) = + \infty$ unless $x = 0$ . Note that (21) is identical to (6) but for the time derivative on the left hand side of the equation which is introduced due to the timedependence arising from the constrained horizon $T$ . Assuming $g ( \alpha ) = \alpha ^ { 2 } , \lambda ( x ) = c x ^ { 2 }$ , and inserting the feedback control as in (9) yields a semi-linear, parabolic PDE

$$
u _ { T } ^ { D } = \frac { 1 } { 2 } \sigma ^ { 2 } u _ { y y } ^ { D } - \beta y u _ { y } ^ { D } + \kappa y ^ { 2 } + c x ^ { 2 } - \left( \frac { u _ { x } ^ { D } + \eta u _ { y } ^ { D } } { 2 } \right) ^ { 2 } .
$$

with initial condition (11). To obtain (22), we let $\alpha$ be unconstrained and allowed to become negative. This allows us to find the following candidate solution by exploiting the linear-quadratic structure. The motivation comes from $u ^ { M }$ in Proposition 1 where we find a similar result: quadratic in $x$ and $y$ with an $x y$ term that adds additional costs when $y < 0$ .

Proposition 2. The solution of (22) has the form

$$
u ^ { D H } ( T , x , y ) = x ^ { 2 } A ( T ) + y ^ { 2 } B ( T ) + x y C ( T ) + x D ( T ) + y E ( T ) + F ( T ) ,
$$

where $D ( T ) = E ( T ) \equiv 0$ , $A , B , C , F$ solve the matrix Riccati ordinary differential equations (ODEs)

$$
\left\{ \begin{array} { l l } { A ^ { \prime } ( T ) } & { = - A ^ { 2 } - \eta A C - \frac { \eta ^ { 2 } } { 4 } C ^ { 2 } + c } \\ { B ^ { \prime } ( T ) } & { = - \eta ^ { 2 } B ^ { 2 } - B ( \eta C + 2 \beta ) + \kappa - \frac { 1 } { 4 } C ^ { 2 } } \\ { C ^ { \prime } ( T ) } & { = - \frac { \eta } { 2 } C ^ { 2 } - C ( \eta ^ { 2 } B + A + \beta ) - 2 \eta A B } \\ { F ^ { \prime } ( T ) } & { = \sigma ^ { 2 } B , } \end{array} \right.
$$

and we have the following initial conditions

$$
\left\{ \begin{array} { l l } { \displaystyle \operatorname* { l i m } _ { T \downarrow 0 } A ( T ) = + \infty } \\ { B ( 0 ) = C ( 0 ) = F ( 0 ) = 0 . } \end{array} \right.
$$

The optimal rate of liquidation is

$$
\alpha _ { t } ^ { D H } ( T - t , x _ { t } , Y _ { t } ) = \frac { x _ { t } ( 2 A ( T - t ) + \eta C ( T - t ) ) + Y _ { t } ( C ( T - t ) + 2 \eta B ( T - t ) ) } { 2 } .
$$

See Appendix D for proof of Proposition 2. We reiterate that in (24) $A , B , C , F$ are functions of time remaining and that we have simplified the notation by omitting the time argument (i.e. $A ^ { \prime } = A ^ { \prime } ( T )$ , etc.) on the right side of (24). Close to the deadline $T$ , the impact from impacting $Y$ disappears, and (22) converges to the myopic linear case of (13). This can be observed by formally linearizing the Riccati system (24) in the regime $T - t = \epsilon$ and using the initial conditions (25). We obtain the following expansions in $\epsilon$ :

$$
\left\{ \begin{array} { l l } { A ( \epsilon ) = \frac { 1 } { \epsilon } + O ( \epsilon ) } \\ { B ( \epsilon ) = \kappa \epsilon + O ( \epsilon ^ { 2 } ) ; } \\ { C ( \epsilon ) = - \eta \kappa \epsilon + O ( \epsilon ^ { 2 } ) ; } \\ { F ( \epsilon ) = \frac { \sigma ^ { 2 } \kappa \epsilon ^ { 2 } } { 2 } + O ( \epsilon ^ { 3 } ) . } \end{array} \right.
$$

Inserting into (26) gives the short term trading rate $\begin{array} { r } { \alpha ^ { D H } ( \epsilon , x _ { t } , Y _ { t } ) = \frac { x _ { t } } { \epsilon } + O ( \epsilon ) } \end{array}$ . This heuristically confirms that the strategy (26) is admissible which can also be observed in Figure 4 below: as $t \to T$ , the dynamic trading rate stabilizes, resembling a VWAP strategy.

Remark 3. It is also possible to set-up and solve linear quadratic problems for other functional forms of inventory risk $\lambda ( x )$ . In the linear case $\lambda ( x ) = c x$ , the resulting Riccati system will have non-zero linear coefficients $D ( T )$ and $E ( T )$ of $x$ and $y$ . However, dynamically satisfying the constraint $x \geq 0$ is not tractable (cf. $\hat { T }$ in (13)) and we found that the resulting unconstrained strategies tend to lead to wild buying-and-selling.

In the constant case $\lambda ( x ) = c$ the Riccati system is almost the same as (24) (again $E ( T ) = D ( T ) \equiv 0$ ) except that the $c$ term moves to the fourth line: $F _ { D L } ^ { \prime } ( T ) = \sigma ^ { 2 } B ( T ) + c$ . In the sequel we use both of these solutions for the numerical illustrations.

The equations in (24) can be dealt with using a software package such as R. It is however necessary to replace the singular initial condition (11) with the condition

$$
\operatorname* { l i m } _ { T \downarrow 0 } u ^ { D } ( T , Y , x ) = { \left\{ \begin{array} { l l } { 0 } & { { \mathrm { i f ~ } } x = 0 } \\ { M } & { { \mathrm { i f ~ } } x \neq 0 } \end{array} \right. }
$$

for a constant $M$ large, essentially allowing for a non-zero position at time $T$ which must then be liquidated in a single order at some additional cost. This is equivalent to introducing a boundary layer $[ 0 , \epsilon ]$ and solving on $T \in [ \epsilon , \infty ]$ whereupon $M = 1 / \epsilon$ is the right choice based on (27).

The optimal trading rate $\alpha ^ { D }$ in (26) is linear in both $x _ { t }$ and $Y _ { t }$ . The former feature is similar to the hyperbolic situation in (14) where $\alpha _ { t } ^ { M H }$ is also linear in $x _ { t }$ . We next illustrate how the dynamic strategy $\alpha _ { t } ^ { D }$ compares to its myopic counterpart $\alpha _ { t } ^ { M }$ . With fixed terminal time $T$ , the incentive for the trader to speed up or slow down under strategy $\alpha _ { t } ^ { D }$ arises from the trader’s desire for more balanced order flow. Note that there is no incentive to accelerate one’s trading in order to complete the task and exit the market prior to time $T$ since costs from $Y$ accrue until $T$ . For positive order flow imbalance, trading more quickly in the present results in lower execution costs in the future because ( $Y _ { t }$ ) will be closer to $0$ as a result of his activity. Likewise, if order flow imbalance is negative, it is better to reduce trading speed so as not to pull ( $Y _ { t }$ ) further from 0. For negative $Y$ and large enough $T$ (or large enough $\kappa$ , $\beta$ ), $\alpha _ { t } ^ { D }$ may become negative (i.e. it may be optimal to begin buying), however this happens only under extreme parameters.

Figure 2 illustrates the results of Proposition 2 for a simulated path of ( $Y _ { t } ^ { 0 }$ ) comparing the myopic $\alpha ^ { M H }$ versus the adaptive $\alpha ^ { D H }$ . As can be observed, both strategies have a broadly similar shape, with $\alpha ^ { D }$ “fluctuating” around $\alpha ^ { M H }$ . We also observe that $\alpha ^ { D }$ is less aggressive initially, starting out slower and then speeding up (relative to $\alpha ^ { M H }$ ) after $t > 1 . 5$ .

![](images/d3c614bac957564c1dd995703a0f873a06c98409fe7589239922d71ef793c148.jpg)  
Figure 2: Trading rates $\alpha _ { t } ^ { D H }$ and $\alpha _ { t } ^ { M H }$ for a sample simulated path of ( $Y _ { t }$ ). The figure is drawn for parameter values $T = 3$ , $\kappa = 1 0$ , $\sigma = . 1 4$ , $\beta = . 0 5$ , $\eta = . 0 5$ , $\lambda ( x ) = 0 . 1 x ^ { 2 }$ , and initial condition $x _ { 0 } = 3 , Y _ { 0 } = 0$ .

# 4 Optimizing Execution Horizon

We now move to the second step of the approximate solution scheme and remove the fixed horizon constraint. Given $u ( T , x , y )$ , define

$$
T ^ { * } : = \arg \operatorname* { m i n } _ { T } \ u ( T , x , y ) .
$$

The next Lemma shows that $T ^ { * }$ is finite in all the cases considered so far.

Lemma 4. For any fixed $x$ , there exists $T$ such that $\partial _ { T } u ( T , x , y ) > 0$ for all $T > \bar { T }$ and all $y$ .

Proof. Recall that $u = \mathcal { I } + \mathcal { O }$ , cf. (18). As $T \to \infty$ , the variational problem (12) for $\mathcal { T }$ becomes independent of $T$ . By inspection, $\begin{array} { r } { \operatorname* { l i m } _ { T  \infty } \boldsymbol { \mathcal { T } } ^ { M L } ( T , \boldsymbol { x } ) = 0 } \end{array}$ and $\begin{array} { r } { \operatorname* { l i m } _ { T  \infty } \boldsymbol { \mathcal { T } } ^ { M H } ( T , x ) = } \end{array}$ ${ \sqrt { c } } x ^ { 2 }$ . In the quadratic case, for $T$ large enough, $\begin{array} { r } { \hat { T } = \frac { 2 \sqrt { x } } { \sqrt { c } } } \end{array}$ so that $\begin{array} { r } { \operatorname* { l i m } _ { T \to \infty } \boldsymbol { \mathcal { T } } ^ { M Q } ( T , \boldsymbol { x } ) = } \end{array}$ ${ \scriptstyle { \frac { 4 } { 3 } } } x ^ { 3 / 2 } { \scriptstyle { \sqrt { c } } }$ for some function of the initial inventory. In contrast, $\begin{array} { r } { \mathcal { O } ( T , x , y ) = \int _ { 0 } ^ { T } \mu _ { t } ^ { 2 } + \sigma _ { t } ^ { 2 } d t } \end{array}$ grows at least linearly in $T$ since $\begin{array} { r } { \operatorname* { l i m } _ { t \to \infty } \sigma _ { t } ^ { 2 } = \frac { \sigma ^ { 2 } } { 2 \beta } } \end{array}$ σ 2 2β . Also, the first term is non-negative and it follows that ∂T O(T, x, y) ≥ σ22β asymptotically as $T \to \infty$ and for any $y$ . Hence, $\partial _ { T } u > 0$ for all $T$ large enough. □

Figure 3 illustrates Lemma 4 for the dynamic hyperbolic strategy with value function $u ^ { D H }$ . We observe that $u ^ { D H } ( T , x , y )$ appears to be convex in $T$ with a unique global minimum $T ^ { * } ( x , y )$ . Moreover, $T ^ { * } ( x , y )$ is largest for $y \simeq 0$ and smallest for negative $y$ . This matches the intuition that trading is slowest in balanced markets where informational costs are large, and fastest in sell-driven markets where further information leakage is minimal.

![](images/6fca01915607f5a2e54f6c19407007948b1df30739f2eaf7885c80ee2921c838.jpg)  
Figure 3: Expected execution cost $u ^ { D H } ( T , x , y )$ as a function of $T$ for different values of order flow imbalance $y$ . The dashed line indicate the value of $T$ achieving the minimum. Figure drawn for $\beta = . 0 5$ , $\sigma = . 1 4$ , $\eta = . 0 5$ , $\kappa = 1 0$ , $\lambda ( x ) = 0 . 1 x ^ { 2 }$ and inventory $x = 3$ .

Given initial $( x , y )$ and corresponding $T ^ { * } ( x , y )$ , let $\alpha _ { t } ^ { M } ( T ^ { * } , x , y )$ (and similarly $\alpha _ { t } ^ { D } ( T ^ { * } , x , y ) )$ be the resulting strategy over the fixed horizon $[ 0 , T ^ { * } )$ . This provides a static or open-loop optimal execution strategy, since $T ^ { * }$ is fixed and not adjusted as order flow $Y _ { t }$ changes. We can also construct a “dynamic” strategy by continually recomputing $T ^ { * } ( x _ { t } , Y _ { t } )$ using the latest datum $( x _ { t } , Y _ { t } )$ . We denote the latter as

$$
\tilde { \alpha } _ { t } ^ { M } ( x , y ) : = \alpha ^ { M } ( T ^ { * } ( x _ { t } , y _ { t } ) , x _ { t } , y _ { t } )
$$

with associated value function $\tilde { u } ^ { M }$ . The corresponding $\tilde { \alpha } ^ { D } ( x , y )$ and $\tilde { u } ^ { D }$ are defined in similar fashion. The approach of “rolling” the horizon $T ^ { * }$ as the underlying stochastic state changes is known as receding horizon control or model predictive control, see e.g. [29].

Remark 4. Recomputing $T ^ { * }$ can be done at any frequency. Namely, given a (stochastic) set $0 = t _ { 0 } < t _ { 1 } < . . .$ , one can construct the strategy $\alpha ( \mathfrak { T } ( t ) , x _ { t } , Y _ { t } )$ where $\mathfrak { T } ( t ) : = T ^ { * } ( x _ { t _ { k } } , Y _ { t _ { k } } )$

and $t _ { k } = \operatorname* { m a x } \{ t _ { i } : t _ { i } < t \}$ . For example, one can take $t _ { k } = \operatorname* { i n f } \{ t : x _ { t } \leq ( K - k ) x / K \}$ , giving $K$ rebalancing periods, during each of which $1 / K$ of total inventory is liquidated.

Before moving forward we pause briefly to summarize the various strategies that have been defined. The fully dynamic strategy which solves the original indefinite-horizon control problem (7) in Section 2 is denoted $\alpha ^ { * } ( x , y )$ . In Section 3.1 we defined a family of myopic strategies on a fixed horizon, generally denoted $\alpha ^ { M } ( T , x , y )$ and specific cases addressed in Lemma 1. Continually optimizing $T ^ { * }$ then yields the receding horizon strategy $\widetilde { \alpha } ^ { M } ( x , y )$ . In Section 3.2 we introduced the dynamic strategy $\alpha ^ { D } ( T , x , y )$ , which adapts to changing flow imbalance over a fixed horizon, as well as the corresponding receding $\tilde { \alpha } ^ { D } ( x , y )$ .

We proceed to compare execution cost statistics across the described strategies. For easier interpretation we consider the case of zero inventory penalization, $\lambda ( x ) = c$ independent of $x$ , so that the benchmark strategy (without informational costs) is VWAP, i.e. constant trading rate. The precise parameters were: timing risk $\lambda ( x ) = c = . 1$ (i.e linear timing costs), initial inventory and initial order flow imbalance $x \ : = \ : 3$ and $y = 0$ respectively, $\eta = . 0 7 5$ , $\kappa = 1 0$ , $\beta = . 0 5$ and $\sigma = . 1 4$ . Against the original strategy $\alpha ^ { * } ( x , y )$ , we also compare the adaptive $\tilde { \alpha } { } ^ { D }$ and $\tilde { \alpha } ^ { M L }$ . Both of these adjust the execution horizon by optimizing $T$ in the fixed-horizon solution. Practically, this was achieved by discretizing in time ( $\Delta t = . 0 1$ ) and recomputing $T ^ { * } ( x _ { t } , Y _ { t } )$ at each time step, see Remark 4. Recall that $\alpha _ { t } ^ { M L } = x _ { t } / T ^ { * } ( t )$ . To understand the frequency of above “rebalancing”, we also show results for the strategy αMt $\alpha _ { t } ^ { M L } ( T _ { ( 2 ) } ^ { * } , x , y )$ which recomputes the horizon midway through the liquidation process, when $\begin{array} { r } { x _ { t } = \frac { x } { 2 } } \end{array}$ . The corresponding path of $x _ { t }$ is therefore piecewise linear with two pieces, see Figure 4. This is a convenient compromise in the $V W A P$ setting and nicely illustrates the advantage gained when the trader is allowed to adjust the execution horizon. Finally, to understand the importance of adaptively adjusting $T ^ { * }$ , we also compare to the static $\alpha ^ { D L } ( T ^ { * } , x , y )$ and $\alpha ^ { M L } ( T ^ { * } , x , y ) = x / T ^ { * } ( x , y )$ .

Table $^ 1$ shows some summary statistics about the distribution of realized costs $J ( \alpha ) : =$ $\begin{array} { r } { \int _ { 0 } ^ { T _ { 0 } } \left( \alpha _ { s } ^ { 2 } + \kappa Y _ { s } ^ { 2 } + c \right) d s } \end{array}$ . The results were produced with 2000 simulated paths of ( $Y _ { t } ^ { 0 }$ ). The actual realized order flow imbalance paths for each strategy reflect the assumption that $\phi ( \alpha _ { t } ) = \eta \alpha _ { t }$ represents the true form of information leakage. Beyond the average expected costs $u ( x , y ) : = \mathbb { E } _ { x , y } [ J ( \alpha ) ]$ , we also report the standard deviation $S D$ and quantiles $q$ · (at the $5 \%$ and $9 5 \%$ level) of $J ( \alpha )$ which are important for risk-management perspective. Lastly, we also report the average realized horizon $\mathbb { E } { \left[ { { T _ { 0 } } } \right] }$ . Of course for non-adaptive strategies, $T _ { 0 } \equiv T ^ { * } ( x , y )$ is constant. Comparing each $\tilde { \alpha }$ to its respective fixed horizon counterpart demonstrates the importance of utilizing “adaptive” execution horizon. Similarly, comparing respective myopic to dynamic strategies shows that the modelling of deterministic information leakage in the former is not too suboptimal compared to the fully dynamic proportional information leakage strategy of the latter. The cost improvements achieved through optimizing the horizon tend to dominate those obtained through adopting a dynamic strategy in lieu of a myopic strategy.

Of particular interest is that the closed form solution computed for $u ^ { M L }$ and resulting strategy $\tilde { \alpha } _ { t } ^ { M L }$ form a reasonable approximation for the difficult indefinite horizon setup in (6) - (9). The cost improvement of the fully dynamic $\alpha ^ { * }$ over VWAP strategy $\alpha ^ { M L }$ is

<table><tr><td></td><td colspan="3">Optimal Execution Strategy</td><td colspan="3"></td></tr><tr><td></td><td>v</td><td>uD</td><td>uM L</td><td>u(2) ,M L</td><td></td><td>uML</td></tr><tr><td>E[J(α)]</td><td>4.257</td><td>4.264</td><td>4.317</td><td>4.411</td><td>4.483</td><td>4.547</td></tr><tr><td>SD(J(α))</td><td>1.50</td><td>1.45</td><td>1.39</td><td>1.49</td><td>1.77</td><td>1.84</td></tr><tr><td>q.05(J(α))</td><td>2.70</td><td>2.76</td><td>2.83</td><td>2.96</td><td>3.11</td><td>3.12</td></tr><tr><td>q.95(J(α))</td><td>7.33</td><td>7.28</td><td>7.10</td><td>7.50</td><td>8.19</td><td>8.42</td></tr><tr><td>E[To]</td><td>3.87</td><td>3.70</td><td>3.48</td><td>3.44</td><td>3.43</td><td>3.43</td></tr></table>

Table 1: Statistics for six execution strategies including average realized cost $J ( \alpha )$ , standard deviation, . $0 5 -$ and . $^ { 9 5 - }$ quantiles of realized costs as well as average realized execution horizon.

approximately $6 . 8 \%$ . This appears somewhat modest, but note that the latter strategy is applied to the horizon $[ 0 , T ^ { * } ]$ , which is the statically optimal horizon computed at $t = 0$ with the value function $u ^ { M L }$ .

Figure 4 illustrates the various strategies for a sample simulated order flow imbalance path $( Y _ { t } ^ { 0 } )$ . The one-sided order flow in this particular simulation causes the “adaptive” horizon strategies to accelerate trading and shorten the horizon relative to the fixed horizon strategies.

# 4.1 Comparative Statics

Focusing on a single strategy, $\tilde { \alpha } _ { t } ^ { D L }$ , we briefly discuss how adjusting the values for parameters $c$ , $\eta$ , and $\kappa$ affect the trading rate and realized horizon. Increasing $c$ corresponds to lower tolerance for timing risk and intuitively leads to a shorter realized horizon and an increase in trading rate across all values of $y$ . Choices for $\kappa$ and $\eta$ depend respectively on the trader’s assessment of the added cost of transacting when order flow is unbalanced and exactly how susceptible one is to revealing information to other participants. Increasing $\kappa$ raises sensitivity to the order flow imbalance which leads to an increase in trading speed and shortened execution horizon, particularly when $( Y _ { t } ^ { 2 }$ ) moves away from 0. At the other extreme, setting $\kappa = 0$ leads to the strategies addressed in Lemma 2 with zero informational cost. The effects of increasing $\eta$ depend on the market state, increasing the trading rate when order flow tilts towards buy orders and slowing when order flow is balanced or sell orders dominate. Specifically, an increase in $\eta$ means a stronger trade impact on the order flow process, and thus it is beneficial in a buy market to tolerate somewhat higher instantaneous costs because the trader can more efficiently capture the savings that result from more balanced order flow in the future (and vice-versa in a sell-tilted market). Figure 5 illustrates these comparative statics for $\tilde { \alpha } ^ { D L }$ in terms of $\kappa$ and $\nu$ . Note that while theoretically $\alpha ^ { D L }$ from (26) could be negative, in all our plots $\alpha ^ { D L }$ remains far from zero and well-behaved.

![](images/3cd3c589f9c88697a3b000dfef841da26bc39b28c56202a04ac98b39faa75a90.jpg)  
Figure 4: Comparison of trading rates $\left( \alpha _ { t } \right)$ for each of six strategies in Table 1 given the shown simulated path of $( Y _ { t } ^ { 0 } )$ (The realized ( $Y _ { t }$ ) depends on the strategy chosen). Note that each strategy terminates at a different $T _ { 0 }$ indicated with a square.

# 4.2 Realized Execution Horizon

We now explore some features of the realized execution horizon $T _ { 0 } ( x , y )$ when following the dynamic strategy $\tilde { \alpha } _ { t } ^ { D } ( x _ { t } , Y _ { t } )$ . The left panel of Figure 6 highlights the distribution of $T _ { 0 } ( x , y )$ for different initial market states. We observe that $T _ { 0 }$ tends to be longest in a balanced market. Indeed, in that case the trader pays the most attention on minimizing his footprint and instantaneous execution costs, and therefore trades slowly. With positive imbalance $Y _ { t } > 0$ , he is incentivized to trade at a more rapid pace in order to bring the market into a more balanced state. On the other hand, when a market is dominated by sell orders $Y _ { t } < 0$ , the trader finds himself competing for liquidity and trading occurs at an even faster pace. The asymmetric effect of these effects creates a skew even with a symmetric informational cost $\kappa y ^ { 2 }$ . This phenomenon is further shown in the right panel of Figure 6 that shows a scatterplot of $T _ { 0 }$ against terminal $Y _ { T _ { 0 } }$ . It is also clear that the issue is not only whether order flow is balanced versus unbalanced, rather the side of the trade is very pertinent to the optimal strategy and realized horizon. Generally, imbalanced order flow results in higher trading costs and a shorter horizon, but clearly as one would expect, trading against the prevailing order flow (selling when order flow is dominated by buy orders) is preferable.

![](images/3e5e289a7fa532cd3c592000c3bfaeaca9b494635322f72527f1f43ded16c71e.jpg)  
Figure 5: Trading rates $\tilde { \alpha } ^ { D L } ( x , y )$ plotted as a function of flow imbalance $y$ for different values of informational cost $\kappa$ and information leakage strength $\eta$ . Inventory level is fixed at $x = 3$ .

We remark that with $T$ fixed, execution rate decreases with $Y _ { t }$ in hopes that the order flow process will revert to a more balanced state and the cost of liquidity will decline in the future. However, allowing the horizon to be adjusted brings a new incentive for accelerating execution in order to exit the market altogether and stop information leakage. This is a phenomenon seen especially in times of panic or capitulation when minimizing the footprint is less important than finding liquidity, even at greater cost.

We also observe a strong correlation between realized execution cost and realized execution horizon. Unbalanced order flow results in higher costs from the $Y _ { t } ^ { 2 }$ term. In addition, as lopsided order flow causes trading to accelerate, the trader also incurs higher costs from the instantaneous cost term $\alpha _ { t } ^ { 2 }$ . So costs tend to be lower for longer realized execution horizon. Figure 7 provides another perspective on this feature by highlighting several specific inventory trajectories and the corresponding realized order flow paths. It also shows that the spread in realized horizon $T _ { 0 }$ is significant and can be up to $5 0 \%$ of the static $T ^ { * }$ .

# 4.3 Static Information Leakage

One of the motivations for the present analysis was the work of Easley et al. [17] (ELO), who considered a related static optimal execution horizon model. Through the lens of our setup, [17] treated the case where informational costs are measured only through $Y _ { T }$ rather than through the integral term in (5). Specifically, ELO equated informational footprint to the absolute value of the terminal flow imbalance $| Y _ { T } |$ . Also, ELO (implicitly) assumed a VWAP execution strategy on $[ 0 , T ]$ which is equivalent to taking zero inventory risk $\lambda ( x ) = 0$ and instantaneous impact $\int _ { 0 } ^ { T } \dot { x } _ { s } d s$ and translates to the myopic strategy $\alpha ^ { M L }$ of constant trading rate. Finally, timing risk was modelled directly as $\Lambda ( T ) = c \sqrt { T }$ , motivated by the same structural form for volatility of $S _ { T }$ . The overall problem in [17] was therefore

![](images/c522d99f3149d885255b7d9c2d131a444bac94c5538cb4d2bccf3e5a5ffeaf06.jpg)  
Figure 6: Left: Distribution of realized execution horizon $T _ { 0 }$ following strategy $\tilde { \alpha } { } ^ { D L }$ for different values of initial flow imbalance $Y _ { 0 } ~ = ~ y$ . Right: Realized execution horizon $\boldsymbol { { \mathit { I } } } _ { 0 } ^ { \prime }$ against final order flow imbalance $Y _ { T _ { 0 } }$ when initial imbalance $Y _ { 0 } = 0$ .

$$
\operatorname* { m i n } _ { T \geq 0 } \left\{ \mathbb { E } [ | Y _ { T } ^ { \alpha } | ] + c \sqrt { T } \right\} , \qquad \alpha _ { t } = x / T .
$$

Our framework allows treatment of (29) in a dynamic setup, i.e. beyond the myopic strategies and beyond a static optimization to obtain $T ^ { * } ( x , y )$ .

The possibility utilized in [17] to directly incorporate a timing cost of the form $\Lambda ( T )$ can be easily handled in more generality within (5) since the latter term makes no difference to the fixed-horizon problems in Sections 3.1-3 and hence only shows up in the secondstep optimization over $T$ . Based on numerical experiments, replacing running $Y$ -costs with a terminal cost $\propto Y _ { T _ { 0 } } ^ { 2 }$ , tends to slow the optimal trading strategy in sell dominated markets which allows the mean reversion in the order flow process to kick in and lower the terminal cost. In the presence of positive order flow, the change in trading rate can be in either direction depending on $\phi ( \alpha )$ and the trade-off between instantaneous costs and informational costs.

# 5 Model Calibration

To implement the proposed execution strategies, the trader must observe the order flow imbalance $Y _ { t }$ . Moreover, they need to be able to calibrate the parameters of $Y _ { t }$ . This requirement is different from typical execution strategies that operate in “open-loop” settings, i.e. without any immediate input of market data. Of course, most empirical trading is “closed-loop” and dynamically responds to market messages. In this section we briefly discuss such calibration and translation of market information into model inputs.

![](images/63c4e09709a7dfacce572cc8ae6599fee3d39cf1c488055c22540d0eb645f965.jpg)  
Figure 7: Top: 200 simulated trajectories $x t$ ) from dynamic adaptive strategy $\tilde { \alpha } _ { t } ^ { D L }$ . Highlighted are three trajectories resulting from different realized order flow imbalance $( Y _ { t } )$ paths. Bottom: Corresponding realizations of order flow imbalance $t \mapsto Y _ { t }$ .

# 5.1 Empirical Order Flow

We begin by focusing on executed orders, which from the flow point of view can be summarized as a sequence $V _ { 1 } , V _ { 2 } , \dots$ , where $V _ { k }$ is the signed market order volume (positive for buys and negative for sells) for the security in question. We assume that trading is in volume time, so there is no separate time-stamp component. A raw order flow would then be the cumulative sum $\sum _ { k } V _ { k }$ . Assuming that the participants focus on recent trades (i.e. market memory is limited) leads to consideration of moving averages of $V _ { k }$ . By analogy to the discussed Ornstein-Uhlenbeck dynamics we therefore introduce the following exponentially weighted moving average (EWMA) flow imbalance process ( $I _ { k }$ ) that is defined recursively via

$$
I _ { k + 1 } = e ^ { - \beta | V _ { k } | } I _ { k } + ( 1 - e ^ { - \beta | V _ { k } | } ) \mathrm { s i g n } ( V _ { k } ) ,
$$

where the memory parameter $\beta$ is a proxy for the time-scale of market participants persistency of beliefs about order flow. Intuitively, if all trades were of unit volume, we would have $I _ { k + 1 } = e ^ { - \beta } I _ { k } + ( 1 - e ^ { - \beta } \mathrm { s i g n } ( V _ { k } )$ ; treating a single trade of $| V _ { k } |$ as that many unit-volume trades leads to (30). We suggest that $\beta = a / V _ { d a i l y }$ where $V _ { d a i l y }$ is the average daily volume and $a \in \lfloor 1 0 , 1 0 0 \rfloor$ is the intra-day mesoscopic time-scale of order flow. By construction, $I _ { k }$ takes values in $[ - 1 , 1 ]$ , with $I _ { k } = 0$ representing a balanced market, and positive and negative values of $I _ { k }$ representing a market tilted towards buying and selling respectively. Figure 8 shows a typical daily path of $I _ { k }$ for two different values of $\beta$ . To draw the Figure we considered all executed Nasdaq ITCH trades between 9:40am and 3:55pm on a fixed trading day and initialized $\tilde { I } _ { 0 } = I _ { 0 } = 0$ in the beginning (note that if one fully adheres to the concept of moving averages, $I _ { 0 }$ should include flow from the previous day, but this is rather problematic to properly implement). As expected, we observe a mean-reverting behavior due to strong negative auto-correlation in $V _ { k }$ ’s. The value of $\beta$ controls the volatility of $I _ { k }$ .

Moving beyond (30) requires separate investigation beyond the scope of this paper. Indeed, the modern limit order book messages are much richer than just a sequence of signed volumes. There are issues of inter-trade durations, intra-day seasonality, and other market information. Moreover, the data features can very significantly between more liquid and less liquid names. Table 2 summarizes some basic details about order flow within a given trading week across three representative equity tickers. We note that each day one must process data for tens of thousands of executed trades, but in fact this is a tip of the iceberg, since there are hundreds of thousands of other trades recorded in the LOB.

![](images/504c479f1a63ff74d7fc1828df2d14500cb9f5f0fb0152aec1e5cc8d9c9b8e23.jpg)  
Figure 8: The EWMA order flow imbalance metric for Teva Pharmaceutical (ticker: TEVA) for a single day 5/3/2011. The data includes executed orders from NASDAQ, BATS and Direct Edge exchanges which accounted for 2, 497, 623 of the 8, 059, 668 total traded shares on the day. We also show the VPIN-like metric that used $V = 2 5 , 0 0 0$ and $n = 2 0$ in (31) and (32) respectively.

Remark 5. While traditionally only executed trades were used to define order flow, in limit order books this approach is questionable. Indeed, in the 2010s, market orders represent less than 5% of total order flow, see Table 2. At the same time, as far as the snapshots of the LOB queues and respective depths are concerned, limit orders that add/cancel at the touch (highest bid/lowest ask price levels) are effectively equivalent to market orders. Therefore, one probably ought to include such limit orders when computing $I _ { k }$ in (30). Table 2 shows that the distribution of limit orders is markedly different from market orders, with limit orders tending to be about $5 0 \%$ smaller on average. Limit orders deeper into the books may also carry material information and could be considered (with a respective weight depending on the corresponding depth level). The precise way to define order flow is therefore ambiguous.

Table 2: Summary daily statistics for LOB orders on the tickers MSFT (Microsoft), TEVA (Teva Pharmaceutical) and BBBY (Blackberry) from NASDAQ, BATS BZX, EDGA and EDGX exchanges. We report averages for the week (5 trading days) of 5/2/2011-5/6/2011.   

<table><tr><td colspan="5">Daily Order Summary</td></tr><tr><td></td><td></td><td>MSFT</td><td>TEVA</td><td>BBBY</td></tr><tr><td rowspan="3">Executions</td><td>Volume</td><td>32, 748, 575</td><td>3, 809, 972</td><td>1, 222, 164</td></tr><tr><td># of Orders</td><td>26, 814</td><td>13, 811</td><td>8,302</td></tr><tr><td>Avg trade size</td><td>1,222</td><td>271</td><td>148</td></tr><tr><td>Limit</td><td>Volume</td><td>271, 383, 713</td><td>25, 523, 228</td><td>13, 558, 498</td></tr><tr><td>Orders</td><td># of Orders</td><td>577, 164</td><td>182, 541</td><td>127, 362</td></tr><tr><td>at Touch</td><td>Avg order size</td><td>469</td><td>139</td><td>107</td></tr><tr><td rowspan="3">Total</td><td>Volume</td><td>675, 466, 734</td><td>98, 398, 817</td><td>70, 149, 547</td></tr><tr><td># of Orders</td><td>1, 284, 524</td><td>542, 762</td><td>534, 557</td></tr><tr><td>Avg order size</td><td>526</td><td>181</td><td>132</td></tr></table>

An alternative way to define empirical order flow imbalance is based on bucketing. This approach is more in line with a discrete model, such as the one in ELO [17] and indexes flow by equally-sized volume slices rather than by individual trades. Namely, consider (executed) volume slices of size $V = V _ { \ell } ^ { B } + V _ { \ell } ^ { S }$ where $( V _ { \ell } ^ { B } )$ and $( V _ { \ell } ^ { S } )$ represent the buy and sell volume respectively for the $\ell$ -th slice. The bucket flow imbalance $\tilde { I } _ { \ell }$ is

$$
\tilde { I } _ { \ell } : = \frac { V _ { \ell } ^ { B } - V _ { \ell } ^ { S } } { V } = 2 V _ { \ell } ^ { B } - 1 .
$$

Compared to (30), we have the link $V \simeq 1 / \beta$ to achieve same time-scale for ( $I _ { k }$ ) and $( \tilde { I } _ { \ell } )$ . The difficulty with (31) is that order volumes are heavy-tailed and a large order that spills over multiple volume buckets must be somehow handled. Moreover, $\tilde { I }$ in (31) is intrinsically tied to the chosen bucket size $V$ (See [6] and [18] for different arguments regarding appropriate bucket sizes). Finally, as in (30), a decision must be made how to include limit order messages when defining volume buckets and respective $V ^ { B }$ and $V ^ { S }$ .

The defined $I _ { k }$ and $\tilde { I } _ { \ell }$ are directly observed, and one could attempt to use them as the basis for the flow process ( $Y _ { t }$ ) used in the previous sections. According to [15, 16, 17, 18], informational costs arise from order flow toxicity which is in turn tied to the participants’ beliefs about probability of adverse selection. Hence, translating past information contained in $I$ into $Y$ requires making a judgement on how such beliefs about future order flows are formed. It is commonly accepted that certain trades are influential or informative while others have little to no impact on the market. With this in mind, it follows that a trade may have little influence on a market maker’s expected flow imbalance even if the associated trade volume $V _ { k }$ was large. Thus, the private information leaked to the market by a trade is the product of numerous factors beyond trade size: spacing of successive orders, prevailing market state, LOB shape, etc. Consequently, the exact relation between ( $I _ { k }$ ) and $( Y _ { t } )$ remains open. Further questions about the most relevant time scale or how the recent history of observed order imbalance might influence the expected future order imbalance are postponed to future empirical study.

Remark 6. In [18], ELO contend that order flow toxicity is linked to the level of “informed” trading and can be approximated via the following VPIN metric based on (31),

$$
\mathrm { V P I N } _ { \ell } = \frac { 1 } { n } \sum _ { k = \ell - n } ^ { \ell - 1 } | \tilde { I } _ { k } | ,
$$

where $n$ , chosen along with bucket size $V$ represents the window relevant for persistency of order flow. Thus, VPIN is a moving average of observed values of $\tilde { I } _ { \ell }$ for $n$ latest volume slices. According to ELO, VPIN is a good approximation to the market-makers’ expectations of the current imbalance $\mathrm { V P I N } _ { \ell } \approx \mathbb { E } | \tilde { I } _ { \ell } |$ and hence can be used as a proxy for $Y _ { t }$ in (29). In other words, the traders should act to minimize their impact on VPIN, which is the expected absolute order flow imbalance. Because VPIN is directly based on observed traded volumes, this also allows an explicit definition of trader’s informational impact, see (34) below. ELO suggest to take $V = V _ { d a i l y } / 5 0$ and $n = 5 0$ which makes VPIN a daily moving average of flow imbalance. This seems rather long and in Figure 8 we make $n$ smaller to focus on intra-day scale.

# 5.2 Discrete Time Formulation

Building on (31) and (32) one can construct a discrete model for optimal execution. This involves reinterpreting the strategy $\alpha$ as a participation rate based on the observation that an executed sell trade inherently affects the next bucket imbalance $\tilde { I } _ { \ell }$ since it physically displaces some of the other volume from that bucket. A discrete-time model also allows to examine more general costs and model dynamics.

Fixing a volume bucket $V$ , we assume that the trader chooses a participation rate $\alpha _ { k }$ at each step, where

$$
x _ { k + 1 } = x _ { k } - \alpha _ { k } V
$$

and $k$ indexes trade volume. The trader’s participation influences the flow imbalance at the next step via

$$
Y _ { k + 1 } = F ( Y _ { k } , \epsilon _ { k + 1 } ) - \phi ( \alpha _ { k } , Y _ { k } )
$$

where $\epsilon _ { k + 1 }$ are independent random perturbations, $F ( y , \cdot )$ models the dynamics in $Y _ { k }$ that happen apart from the trader and $\phi ( \alpha , y )$ is the information leakage given previous imbalance $Y _ { k } = y$ . One motivation to generalize the leakage function is the trade influence proposed in [17],

$$
Y _ { k + 1 } = \psi ( \alpha _ { k } ) ( Y _ { k } ( 1 - \alpha _ { k } ) - \alpha _ { k } ) + ( 1 - \psi ( \alpha _ { k } ) ) Y _ { k } + \epsilon _ { k + 1 } ,
$$

where we still have $\alpha _ { k } \in [ 0 , 1 ]$ and the function $\psi \in [ 0 , 1 ]$ is monotonic increasing. The new expected order flow imbalance is a convex combination of two extreme outcomes: full leakage according to $\psi$ (first term) and no leakage (second term). (34) simplifies to

$$
\begin{array} { r } { \mathbb { E } [ Y _ { k + 1 } ] = Y _ { k } - \alpha _ { k } \psi ( \alpha _ { k } ) ( Y _ { k } + 1 ) = : Y _ { k } - \phi ( \alpha _ { k } , Y _ { k } ) . } \end{array}
$$

In analogue to Section 2, the trader’s goal is to minimize total expected costs until the entire position has been liquidated,

$$
v ( x , y ) : = \operatorname* { i n f } _ { \alpha } \mathbb { E } _ { x , y } \left[ \sum _ { k = 0 } ^ { T _ { 0 } - 1 } g ( \alpha _ { k } ) + \kappa Y _ { k } ^ { 2 } + \lambda ( x _ { k } ) \right] , \quad T _ { 0 } = \operatorname* { m i n } \{ k : x _ { k } = 0 \} .
$$

The control $\alpha _ { k }$ is constrained so that $\alpha _ { k } \in ( 0 , 1 ]$ and is assumed to be in feedback form, $\alpha _ { k } = \alpha ( x _ { k } , Y _ { k } )$ .

The indefinite-horizon control problem (35) can be solved by introducing an auxiliary “time” variable $t$ such that execution stops after $t$ steps (if it did not terminate already) and remaining inventory at $t$ incurs a terminal cost $H ( x _ { t } ) = A x _ { t } ^ { 2 }$ (assuming immediate one-step liquidation after $t$ , cf. the VWAP strategy in (13)). This auxiliary problem has value function $v ^ { ( t ) }$ defined in (36). As $t \to \infty$ , this execution horizon constraint vanishes and we expect to recover the time-stationary solution $v ( x , y )$ of (35).

Using $t$ as time-to-maturity, we have the discrete-time dynamic programming equations

$$
\begin{array} { r l } & { v ^ { ( 0 ) } ( x , y ) = H ( x ) , } \\ & { v ^ { ( t ) } ( x , y ) = \underset { \alpha \in ( 0 , 1 ] } { \operatorname* { i n f } } \mathbb { E } _ { y } \Big [ g ( \alpha ) + \kappa y ^ { 2 } + \lambda ( x ) + v ^ { ( t - 1 ) } ( x - \alpha V , Y _ { 1 } ) \Big ] } \end{array}
$$

where $Y _ { 1 } = Y _ { 1 } ^ { \alpha }$ is defined by (33) and $v ^ { ( t ) } ( 0 , y ) = 0 \forall y$ . The one-stage problem in (36) can be readily solved using a Markov-chain approximation method by discretizing the state space of $Y$ and the bounded control space of $\alpha$ (which also makes the state space of $x _ { t }$ discrete). The above procedure allows arbitrary dynamics for ( $Y _ { k }$ ) beyond (34) since one can always use Monte Carlo or other methods to compute the transition density $p _ { Y _ { 1 } } ( \cdot | Y _ { 0 } = y , \alpha )$ .

# 5.3 Future Directions

An important aspect that is missing from the presented models is price risk. With a fixed horizon, the assumption that the unperturbed asset price is a martingale makes realized revenue only depend on execution risk. However, once the agent has the liberty to extend the execution horizon, this is no longer the case and the trader could also chase higher revenues. Explicit modeling of such objectives would necessarily increase the dimensionality since another stochastic state variable, the (mid-)price $S _ { t }$ , must be added. Nevertheless, under certain assumptions this more general setup could still be tractable. In particular, one could maintain the linear-quadratic structure by adopting the assumptions of [21]. Gatheral and Schied [21] assume that $S$ is described by a geometric Brownian motion and inventory risk is measured by time-averaged value-at-risk (VAR), i.e. $\lambda _ { t } = \lambda x _ { t } S _ { t }$ . Making this adjustment in (5) leads to the problem of minimizing

$$
\check { u } ( T , S , x , y ) : = \mathbb { E } _ { S , x , y } \left[ \int _ { 0 } ^ { T } \left( \dot { x } _ { t } ^ { 2 } + \kappa Y _ { t } ^ { 2 } + \lambda x _ { t } S _ { t } \right) d t \right] .
$$

Assuming linear information leakage and that $S$ and $Y$ have correlation $\rho ~ \in ~ \left\lfloor - 1 , 1 \right\rfloor$ , $d W _ { t } ^ { ( S ) } d W _ { t } ^ { ( Y ) } = \rho d t$ allows for a closed-form solution

$$
\check { u } ( T , S , x , y ) = x ^ { 2 } \check { A } ( T ) + y ^ { 2 } \check { B } ( T ) + x y \check { C } ( T ) + S ^ { 2 } \check { D } ( T ) + S x \check { E } ( T ) + S y \check { F } ( T ) + \check { G } ( T ) + \check { D } ( T ) ,
$$

where the coefficients ${ \check { A } } , \ldots$ , solve yet again a Riccati ODE. Moreover, a fully closed form solution is possible for strategies that are myopic with respect to $Y _ { t }$ (see [20] for details). As in Remark 3, the main difficulty is that an inventory risk that is linear in $x$ cannot guarantee $x _ { s } \geq 0$ and hence is likely to include buying, making the optimization over $T$ delicate.

In the dynamic case the execution strategy is given by

$$
, S _ { t } , x _ { t } , y _ { t } \} = \frac { 1 } { 2 } \Bigl \{ x _ { t } ( 2 \check { A } ( T - t ) + \eta \check { C } ( T - t ) ) + Y _ { t } ( \check { C } ( T - t ) + 2 \eta \check { B } ( T - t ) ) + S _ { t } ( \check { E } ( T - t ) + \eta \check { F } ( T - t ) ) \Bigr \}
$$

and is therefore linear in price $S _ { t }$ . (The myopic strategy is also linear in $S _ { t }$ ). Note that only the execution cost $\check { u }$ is impacted by $\rho$ , while the strategies themselves are independent of the correlation between asset prices and order flow. In reality, the joint behavior of order flow and asset prices remains poorly understood. In fact, the positive correlation between market-order flow and asset price is a direct indication of adverse selection affecting liquidity providers, see e.g. the very recent preprint [10]. Further investigation into how the co-movement of order flow and asset prices might affect execution costs seems warranted.

Another piece that could be potentially added is LOB resiliency, i.e. the intermediate effect of consuming liquidity which temporarily moves the execution price. As already explained, it is analytically quite similar to the modeled impact on $Y$ , but instead operates directly on $S$ . Resiliency allows to separate the temporary impact on the LOB that does not increase toxicity with the “permanent” impact on $Y$ that changes participant expectations of future flow and generates informational footprint.

# A Finite Difference Approach to (9)

We employ an explicit finite difference scheme to find an approximate solution to (9). Denote $v _ { i , j } : = v ( x _ { i } , y _ { j } )$ , where $x _ { i } = i \Delta x$ for $i = 0 , 1 , \ldots , N$ and $y _ { j } = y _ { 0 } + j \Delta y$ for $j =$ $0 , 1 , \ldots , M$ . Derivatives of $v$ are approximated as

$$
\begin{array} { r l } & { \frac { \partial } { \partial x } v ( x _ { i } , y _ { j } ) = \frac { v _ { i + 1 , j } - v _ { i , j } } { \Delta x } ; } \\ & { \frac { \partial } { \partial y } v ( x _ { i } , y _ { j } ) = \frac { v _ { i , j + 1 } - v _ { i , j - 1 } } { 2 \Delta y } ; } \\ & { \frac { \partial ^ { 2 } } { \partial y ^ { 2 } } v ( x _ { i } , y _ { j } ) = \frac { v _ { i , j + 1 } - 2 v _ { i , j } + v _ { i , j - 1 } } { ( \Delta y ) ^ { 2 } } , } \end{array}
$$

and we apply the boundary condition $v ( 0 , y ) = v _ { 0 , j } = 0 \forall j$ . In $y$ we use the boundary conditions for $v _ { i , 0 }$ and $v _ { i , M }$ via $\begin{array} { r } { \frac { \partial ^ { 2 } v ( x _ { i } , y _ { 1 } ) } { \partial y ^ { 2 } } = \frac { \partial ^ { 2 } v ( x _ { i } , y _ { M - 1 } ) } { \partial y ^ { 2 } } = 0 } \end{array}$ ∂2v(xi,yM−1)2 = 0 and choose y0 and yM such that $\mathbb { P } ( ( Y _ { t } ) \notin [ y _ { 0 } , y _ { M } ] ) \approx 0$ . Substituting into (9) we have

$$
0 = \frac { 1 } { 2 } \sigma ^ { 2 } \frac { \partial ^ { 2 } v _ { i , j } } { \partial y ^ { 2 } } - \beta y _ { j } \frac { \partial v _ { i , j } } { \partial y } + \kappa y _ { j } ^ { 2 } + \lambda ( x _ { i } ) - \frac { 1 } { 4 } \left( \frac { \partial v _ { i , j } } { \partial x } + \eta \frac { \partial v _ { i , j } } { \partial y } \right) ^ { 2 }
$$

and rearranging terms yields

$$
\begin{array} { r l } & { v _ { i + 1 , j } = v _ { i , j } } \\ & { \Delta x \left( 2 \left( \kappa y _ { j } ^ { 2 } + \lambda ( x _ { i } ) - \beta y _ { j } \frac { v _ { i , j + 1 } - v _ { i , j - 1 } } { 2 \Delta y } + \frac { \sigma ^ { 2 } } { 2 } \frac { v _ { i , j + 1 } - 2 v _ { i , j } + v _ { i , j - 1 } } { ( \Delta y ) ^ { 2 } } \right) ^ { 1 / 2 } - \eta \frac { v _ { i , j + 1 } - ( \kappa y _ { i + 1 } ) ^ { 2 } } { 2 \Delta y } \right) ^ { 1 / 2 } } \end{array}
$$

So we have a so called “time-marching” scheme in $x$ , where $v$ at each inventory level $i + 1$ can be approximated by values from the previous inventory level $i$ . This explicit approach is available for appropriate parameter values in which $\alpha ^ { * } > 0$ holds. For more extreme parameter values we may have $\alpha ^ { * } = 0$ (recall that we constrain $\alpha ^ { * } \geq 0$ ). In this case our explicit method would fail for certain grid points and it would be necessary to utilize an alternative method.

# B Proof of Lemma 1

Proof. We skip the trivial case $\lambda ( x ) = 0$ . See [23] for details when $\lambda ( x ) \ = \ c x ^ { 2 }$ . For $\lambda ( x ) = c x$ , when $x$ is unconstrained, the problem is a straightforward application of the Euler-Lagrange equation. For cost functional $F ( x , \dot { x } , t ) = \dot { x } _ { s } ^ { 2 } + c x _ { s }$ , the optimal trajectory xMQt must satisfy

$$
\left( { \frac { d F } { d x } } - { \frac { d } { d t } } { \frac { d F } { d { \dot { x } } } } \right) = 0
$$

Applying the constraint that $x$ is decreasing introduces the boundary condition at $x = 0$ . Then the optimal trajectory for the constrained minimization problem either lies on the curve which satisfies the Euler-Lagrange equation or lies along the boundary, with the transition from the former to the latter occurring where xMQt is tangent to the line x = 0. In order to find the point at which this transition takes place, we find $T ^ { \prime }$ such that tdt t=T 0 = 0.√ It is easily verified that $\begin{array} { r } { T ^ { \prime } = \frac { 2 \sqrt { x } } { \sqrt { c } } } \end{array}$ satisfies the requirement and so we have $\begin{array} { r } { \hat { T } = \operatorname* { m i n } ( T , \frac { 2 \sqrt { x } } { \sqrt { c } } ) } \end{array}$ .

Having computed $x _ { t } ^ { M }$ for each choice inventory risk term, $\alpha _ { t } ^ { M }$ and ${ \boldsymbol { \mathcal { T } } } ^ { M }$ are computed respectively by differentiating with respect to $t$ and integrating over the interval $[ 0 , T ]$ $( [ 0 , { \hat { T } } ]$ for $\mathcal { T } ^ { M Q }$ ).

# C Proof of Proposition 1

Proof. An application of Fubini’s theorem, permits the interchange of expectation and integration leaving us with a straight-forward but lengthy integral computation. The general expression for $\mathcal { O }$ is

$$
\mathcal { O } ( T , x , y ) = \int _ { 0 } ^ { T } ( y e ^ { - \beta t } - A _ { t } ) ^ { 2 } + \frac { \sigma ^ { 2 } } { 2 \beta } ( 1 - e ^ { - 2 \beta t } ) d t
$$

where

$$
A _ { t } : = \int _ { 0 } ^ { t } e ^ { - \beta ( t - s ) } \phi _ { s } d s
$$

captures all the information leakage. Integrating the other two terms gives

$$
\begin{array} { l } { { \displaystyle { \mathcal O } ^ { 0 } ( T , x , y ) = \kappa \int _ { 0 } ^ { T } ( y e ^ { - \beta t } ) ^ { 2 } + \sigma _ { t } ^ { 2 } d t } } \\ { { \displaystyle \quad = \frac { \kappa y ^ { 2 } } { 2 \beta } \left( 1 - e ^ { - 2 \beta T } \right) + \frac { \kappa \sigma ^ { 2 } } { 4 \beta ^ { 2 } } \left( 2 \beta T + e ^ { - 2 \beta T } - 1 \right) . } } \end{array}
$$

Computing the integral for the remaining three cases is straight-forward but tedious. We provide the values of $A _ { t }$ for each case. For $\phi _ { t } = \eta \alpha _ { t } ^ { M L }$ , we have $\begin{array} { r } { A _ { t } ^ { M L } = \frac { \eta x } { \beta T } ( 1 - e ^ { - \beta t } ) } \end{array}$ When $\phi _ { t } = \eta \alpha _ { t } ^ { M Q }$ we have

$$
\begin{array} { l } { { \displaystyle { \cal A } _ { t } ^ { M Q } = \eta \int _ { 0 } ^ { t } \left( \frac { c \hat { T } } { 4 } + \frac { x } { \hat { T } } - \frac { c t } { 2 } \right) e ^ { - \beta ( t - s ) } d s } } \\ { { \displaystyle ~ = \frac { \eta } { \beta ^ { 2 } } \left( c ( 1 - \beta t + e ^ { - \beta t } ) + \beta ( 1 - e ^ { - \beta t } ) \left( \frac { c \hat { T } } { 4 } + \frac { x } { \hat { T } } \right) \right) . } } \end{array}
$$

Lastly, when $\phi _ { t } = \eta \alpha _ { t } ^ { M H }$ and $\sqrt { c } \neq \beta$ , we have

$$
\begin{array} { l } { { \displaystyle { \cal A } _ { t } ^ { M H } = \eta \int _ { 0 } ^ { t } \frac { \sqrt { c } x \cosh \left( \sqrt { c } ( T - s ) \right) } { \sinh \left( \sqrt { c } T \right) } e ^ { - \beta ( t - s ) } d s } \ ~ } \\ { { \displaystyle ~ = \frac { \eta \sqrt { c } x } { \left( c - \beta ^ { 2 } \right) \sinh \left( \sqrt { c } T \right) } ( \lambda \sinh ( \sqrt { c } ( T - t ) ) + \sqrt { c } e ^ { - \beta t } \sinh ( \sqrt { c } T ) } \ ~ } \\ { { \displaystyle ~ - \beta \cosh ( \sqrt { c } ( T - t ) ) + \beta e ^ { - \beta t } \cosh ( \sqrt { c } T ) ) } . } \end{array}
$$

If $\sqrt { c } = \beta$ then the final expression simplifies to

$$
A _ { t } ^ { M H ^ { \prime } } = \frac { \eta x e ^ { - \beta t } e ^ { - \beta T } \left( 2 \beta t e ^ { 2 \beta T } + e ^ { 2 \beta t } - 1 \right) } { 4 \beta \sinh ( \beta T ) } .
$$

One can finally integrate (using a symbolic integration software for example) (39) over $t \in [ 0 , T ]$ to obtain closed-form expressions for $\mathcal { O } ^ { M Q }$ and $\mathcal { O } ^ { M H }$ . The resulting formulas which take several lines are available on request from the authors.

# D Proof of Proposition 2

Proof. Substituting (23) into the HJB PDE (22) we have

$$
{ \begin{array} { r l } { } & { { \mathrm { \Lambda } } _ { r } ^ { \mathrm { \Lambda } } = \sigma ^ { 2 } B ( T ) + \kappa y ^ { 2 } + c ^ { 2 } x ^ { 2 } - \beta y ( 2 y B ( T ) + x C ( T ) ) - \left( { \frac { 2 x A ( T ) + y C ( T ) + \eta ( 2 y B ( T ) + T ) } { 2 } } \right) } \\ { } & { = x ^ { 2 } \left( c ^ { 2 } - ( A ( T ) ) ^ { 2 } - \eta A ( T ) C ( T ) - ( \eta C ( T ) ) ^ { 2 } \right) } \\ { } & { + y ^ { 2 } \left( \kappa - 2 \beta B ( T ) - \left( { \frac { C ( T ) } { 2 } } \right) ^ { 2 } - \eta B ( T ) C ( T ) - ( \eta B ( T ) ) ^ { 2 } \right) } \\ { } & { + x y \left( - \beta C ( T ) - A ( T ) C ( T ) - 2 \eta A ( T ) B ( T ) - { \frac { \eta ( C ( T ) ) ^ { 2 } } { 2 } } - \eta ^ { 2 } B ( T ) C ( T ) \right) + \sigma ^ { 2 } B ( T ) B ( T ) } \end{array} }
$$

On the other hand, $u _ { T } ^ { D } = x ^ { 2 } A ^ { \prime } ( T ) + y ^ { 2 } B ^ { \prime } ( T ) + x y C ^ { \prime } ( T ) + x D ^ { \prime } ( T ) + y E ^ { \prime } ( T ) + F ^ { \prime } ( T )$ . Matching the appropriate powers of $x , y$ on either side of the equality yields the system of Riccati differential equations (24), with the boundary conditions (11) translating into (25). As previously mentioned, the first order terms $D ( T )$ and $E ( T )$ in $x$ and $y$ are not required if the inventory risk term is of order $x ^ { 2 }$ or $^ 1$ . □

# References

[1] Aur´elien Alfonsi and Alexander Schied. Optimal trade execution and absence of price manipulations in limit order book models. SIAM J. Financial Math., 1:490–522, 2010.   
[2] Aur´elien Alfonsi, Alexander Schied, and Alla Slynko. Order book resilience, price manipulation, and the positive portfolio problem. SIAM Journal on Financial Mathematics, 3(1):511–533, 2012.   
[3] Robert Almgren. Optimal trading with stochastic liquidity and volatility. SIAM Journal on Financial Mathematics, 3(1):163–181, 2012.   
[4] Robert Almgren and Neil Chriss. Optimal execution of portfolio transactions. Journal of Risk, 3:5–40, 2001.   
[5] Robert F Almgren. Optimal execution with nonlinear impact functions and tradingenhanced risk. Applied Mathematical Finance, 10(1):1–18, 2003.   
[6] Torben G Andersen and Oleg Bondarenko. VPIN and the flash crash. Journal of Financial Markets, 17:1–46, 2012.   
[7] Erhan Bayraktar and Michael Ludkovski. Optimal trade execution in illiquid markets. Mathematical Finance, 21(4):681–701, 2011.   
[8] Jean-Philippe Bouchaud. Price impact. In Encyclopedia of Quantitative Finance. Wiley Online Library, 2010.   
[9] Jean-Philippe Bouchaud, J Doyne Farmer, and Fabrizio Lillo. How markets slowly digest changes in supply and demand. In Thorsten Hens IV and Klaus Reiner Schenk-Hopp´e, editors, Handbook of Financial Markets: Dynamics and Evolution: Dynamics and Evolution, pages 57–160. Elsevier, 2009.   
[10] Rene Carmona and Kevin Webster. The self-financing equation in high frequency markets. Technical report, 2013. arXiv preprint arXiv:1312.2302.   
[11] Alvaro Cartea and Sebastian Jaimungal. Optimal execution with limit and market ´ orders. SIAM Journal on Financial Mathematics, forthcoming, 2014.   
[12] Alvaro Cartea, Sebastian Jaimungal, and Jason Ricci. Buy low sell high: a high ´ frequency trading perspective. Technical report, Availale on SSRN, 2011.   
[13] Rama Cont, Arseniy Kukanov, and Sasha Stoikov. The price impact of order book events. Journal of Financial Econometrics, 12(1):47–88, 2013.   
[14] Ryan Francis Donnelly. Ambiguity Aversion in Algorithmic and High Frequency Trading. PhD thesis, University of Toronto, 2014.   
[15] David Easley, Marcos M L´opez de Prado, and Maureen O’Hara. The microstructure of the flash crash: Flow toxicity, liquidity crashes and the probability of informed trading. Journal of Portfolio Management, 37(2):118–128, 2011.   
[16] David Easley, Marcos M L´opez de Prado, and Maureen O’Hara. Flow toxicity and liquidity in a high-frequency world. Review of Financial Studies, 25(5):1457–1493, 2012.   
[17] David Easley, Marcos M L´opez de Prado, and Maureen O’Hara. Optimal execution horizon. Mathematical Finance, forthcoming, 2013.   
[18] David Easley, Marcos M L´opez de Prado, and Maureen O’Hara. VPIN and the flash crash: A rejoinder. Journal of Financial Markets, 17:47–52, 2014.   
[19] J Doyne Farmer, Austin Gerig, Fabrizio Lillo, and Henri Waelbroeck. How efficiency shapes market impact. Quantitative Finance, 13(11):1743–1758, 2013.   
[20] Jim Gatheral and Alexander Schied. Optimal trade execution under geometric brownian motion in the almgren and chriss framework. International Journal of Theoretical and Applied Finance, 14(03):353–368, 2011.   
[21] Jim Gatheral and Alexander Schied. Optimal trade execution under geometric brownian motion in the almgren and chriss framework. International Journal of Theoretical and Applied Finance, 14(03):353–368, 2011.   
[22] Jim Gatheral, Alexander Schied, and Alla Slynko. Transient linear price impact and fredholm integral equations. Mathematical Finance, 22(3):445–474, 2012.   
[23] Richard C Grinold and Ronald N Kahn. Active portfolio management. McGraw Hill New York, NY, 2000.   
[24] Olivier Gu´eant, Charles-Albert Lehalle, and Joaquin Fernandez-Tapia. Optimal portfolio liquidation with limit orders. SIAM Journal on Financial Mathematics, 3(1):740– 764, 2012.   
[25] Fabien Guilbaud and Huyen Pham. Optimal high-frequency trading with limit and market orders. Quantitative Finance, 13(1):79–94, 2013.   
[26] Robert Huitema. Optimal portfolio execution using market and limit orders. Technical report, Available at SSRN 1977553, 2013.   
[27] Andrei Kirilenko, Albert S Kyle, Mehrdad Samadi, and Tugkan Tuzun. The flash crash: The impact of high frequency trading on an electronic market. Technical report, Available on SSRN, 2011.   
[28] Ciamac C Moallemi and Mehmet Saglam. The cost of latency in high-frequency trading. Operations Research, 61(5):1070–1086, 2013.   
[29] James A Primbs. Portfolio optimization applications of stochastic receding horizon control. In American Control Conference, 2007. ACC’07, pages 1811–1816. IEEE, 2007.