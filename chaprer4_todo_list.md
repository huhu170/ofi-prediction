# 第四章实验任务清单 (Experiment Task List)

> 本清单用于追踪第四章所有实验任务的执行进度，与 `目录大纲.md` 中的 TODO 占位符一一对应。
> 
> **更新日期**：2026-01-13

---

## 一、任务总览 (Overview)

| 节 | 任务数 | 已完成 | 进度 |
|----|--------|--------|------|
| 4.1 OFI与价格变动的统计分析 | 9 | 0 | ⬜ 0% |
| 4.2 模型性能评估与实证对比 | 4 | 0 | ⬜ 0% |
| 4.3 策略回测与经济价值评估 | 4 | 0 | ⬜ 0% |
| 4.4 模型可解释性与稳健性检验 | 4 | 0 | ⬜ 0% |
| **合计** | **21** | **0** | **⬜ 0%** |

**状态图例**：⬜未开始 | 🔄进行中 | ✅已完成 | ❌阻塞 | ⏸暂停

---

## 二、详细任务清单 (Detailed Task List)

### 第一节：OFI与价格变动的统计分析 (4.1.x)

| 编号 | 任务名称 | 类型 | 依赖 | 脚本 | 状态 | 产出 |
|------|----------|------|------|------|------|------|
| 4.1.1 | 样本描述性统计 | 表格 | 无 | `exp_4_1_1_sample_stats.py` | ⬜ | 表4-1 |
| 4.1.2 | OFI分布直方图 | 图片 | 4.1.1 | `exp_4_1_2_ofi_distribution.py` | ⬜ | 图4-1 |
| 4.1.3 | OFI描述性统计 | 表格 | 4.1.1 | `exp_4_1_2_ofi_distribution.py` | ⬜ | 表4-2 |
| 4.1.4 | 标签分布检验 | 表格 | 4.1.1 | `exp_4_1_3_label_balance.py` | ⬜ | 表4-3 |
| 4.1.5 | OFI相关性检验 | 表格 | 4.1.3 | `exp_4_1_4_correlation.py` | ⬜ | 表4-4 |
| 4.1.6 | OFI线性回归 | 表格 | 4.1.5 | `exp_4_1_5_ols_regression.py` | ⬜ | 表4-5 |
| 4.1.7 | 冲击系数日内变化 | 图片 | 4.1.6 | `exp_4_1_6_intraday_impact.py` | ⬜ | 图4-2 |
| 4.1.8 | 深度OFI解释力对比 | 表格 | 4.1.6 | `exp_4_1_7_depth_comparison.py` | ⬜ | 表4-6 |
| 4.1.9 | 深度OFI柱状图 | 图片 | 4.1.8 | `exp_4_1_7_depth_comparison.py` | ⬜ | 图4-3 |

### 第二节：模型性能评估与实证对比 (4.2.x)

| 编号 | 任务名称 | 类型 | 依赖 | 脚本 | 状态 | 产出 |
|------|----------|------|------|------|------|------|
| 4.2.1 | 基准模型性能汇总 | 表格 | 4.1.4 | `exp_4_2_1_baseline_models.py` | ⬜ | 表4-7 |
| 4.2.2 | 深度学习模型性能汇总 | 表格 | 4.2.1 | `exp_4_2_2_deep_models.py` | ⬜ | 表4-8 |
| 4.2.3 | 模型性能对比图 | 图片 | 4.2.2 | `exp_4_2_3_model_comparison_plot.py` | ⬜ | 图4-4 |
| 4.2.4 | 特征消融实验 | 表格 | 4.2.2 | `exp_4_2_4_ablation.py` | ⬜ | 表4-9 |

### 第三节：策略回测与经济价值评估 (4.3.x)

| 编号 | 任务名称 | 类型 | 依赖 | 脚本 | 状态 | 产出 |
|------|----------|------|------|------|------|------|
| 4.3.1 | 回测参数设置 | 表格 | 无 | `exp_4_3_1_backtest_config.py` | ⬜ | 表4-10 |
| 4.3.2 | 经济价值指标 | 表格 | 4.2.2, 4.3.1 | `exp_4_3_2_backtest.py` | ⬜ | 表4-11 |
| 4.3.3 | 策略净值曲线 | 图片 | 4.3.2 | `exp_4_3_2_backtest.py` | ⬜ | 图4-5 |
| 4.3.4 | Smart-OFI经济价值对比 | 表格 | 4.3.2 | `exp_4_3_3_ofi_comparison.py` | ⬜ | 表4-12 |

### 第四节：模型可解释性与稳健性检验 (4.4.x)

| 编号 | 任务名称 | 类型 | 依赖 | 脚本 | 状态 | 产出 |
|------|----------|------|------|------|------|------|
| 4.4.1 | SHAP特征重要性 | 图片 | 4.2.2 | `exp_4_4_1_shap_analysis.py` | ⬜ | 图4-6 |
| 4.4.2 | SHAP单样本归因 | 图片 | 4.4.1 | `exp_4_4_1_shap_analysis.py` | ⬜ | 图4-7 |
| 4.4.3 | 市场状态异质性检验 | 表格 | 4.2.2 | `exp_4_4_2_regime_split.py` | ⬜ | 表4-13 |
| 4.4.4 | 样本异质性检验 | 表格 | 4.2.2 | `exp_4_4_3_asset_split.py` | ⬜ | 表4-14 |

---

## 三、任务依赖关系 (Dependency Graph)

```
阶段0：数据准备（前置）
└── 清洗后的LOB数据、OFI特征序列、标签序列

阶段1：描述性统计（4.1.1-4.1.4）
├── 4.1.1 样本统计 ─────────────────────────────────────┐
│   ├── 4.1.2 OFI分布直方图                              │
│   ├── 4.1.3 OFI描述性统计 ──┐                         │
│   └── 4.1.4 标签分布检验    │                         │
│                             ↓                         │
阶段2：相关性与回归分析（4.1.5-4.1.9）                    │
├── 4.1.5 OFI相关性检验 ──────┐                         │
│                             ↓                         │
├── 4.1.6 OFI线性回归 ────────┼───┐                     │
│   └── 4.1.7 冲击系数日内变化│   │                     │
│                             ↓   │                     │
├── 4.1.8 深度OFI解释力对比 ──┘   │                     │
│   └── 4.1.9 深度OFI柱状图       │                     │
│                                 ↓                     │
阶段3：模型训练（4.2.1-4.2.4）    │                     │
├── 4.2.1 基准模型 ←──────────────┴─────────────────────┘
│   └── 4.2.2 深度学习模型 ───────────────┐
│       ├── 4.2.3 模型对比图              │
│       └── 4.2.4 消融实验                │
│                                         ↓
阶段4：经济评估（4.3.x）                  │
├── 4.3.1 回测参数 ───────────────────────┼───┐
│                                         │   ↓
├── 4.3.2 经济价值指标 ←──────────────────┴───┘
│   ├── 4.3.3 净值曲线图
│   └── 4.3.4 Smart-OFI对比
│
阶段5：稳健性检验（4.4.x）
├── 4.4.1 SHAP特征重要性 ←── 4.2.2
│   └── 4.4.2 SHAP单样本归因
├── 4.4.3 市场状态检验 ←──── 4.2.2
└── 4.4.4 样本异质性检验 ←── 4.2.2
```

---

## 四、执行顺序建议 (Execution Order)

### 推荐执行批次

| 批次 | 任务编号 | 预计耗时 | 说明 |
|------|----------|----------|------|
| **Batch 1** | 4.1.1 | 10 min | 数据质量验证，优先执行 |
| **Batch 2** | 4.1.2, 4.1.3, 4.1.4 | 20 min | 特征与标签分布（可并行） |
| **Batch 3** | 4.1.5, 4.1.6 | 15 min | 相关性与回归分析 |
| **Batch 4** | 4.1.7, 4.1.8, 4.1.9 | 20 min | 日内变化与深度对比 |
| **Batch 5** | 4.2.1 | 30 min | 基准模型训练 |
| **Batch 6** | 4.2.2 | 2-4 h | 深度学习模型训练（最耗时） |
| **Batch 7** | 4.2.3, 4.2.4 | 30 min | 可视化与消融实验 |
| **Batch 8** | 4.3.1, 4.3.2, 4.3.3, 4.3.4 | 1 h | 回测与经济评估 |
| **Batch 9** | 4.4.1, 4.4.2, 4.4.3, 4.4.4 | 1 h | 可解释性与稳健性 |

### 关键路径

```
4.1.1 → 4.1.3 → 4.1.5 → 4.1.6 → 4.2.1 → 4.2.2 → 4.3.2 → 4.3.4
                                          ↓
                                       4.4.1 → 4.4.2
```

---

## 五、脚本清单 (Script List)

| 脚本名 | 对应任务 | 状态 | 备注 |
|--------|----------|------|------|
| `exp_4_1_1_sample_stats.py` | 4.1.1 | ⬜ 待创建 | |
| `exp_4_1_2_ofi_distribution.py` | 4.1.2, 4.1.3 | ⬜ 待创建 | 合并脚本 |
| `exp_4_1_3_label_balance.py` | 4.1.4 | ⬜ 待创建 | |
| `exp_4_1_4_correlation.py` | 4.1.5 | ⬜ 待创建 | |
| `exp_4_1_5_ols_regression.py` | 4.1.6 | ⬜ 待创建 | |
| `exp_4_1_6_intraday_impact.py` | 4.1.7 | ⬜ 待创建 | |
| `exp_4_1_7_depth_comparison.py` | 4.1.8, 4.1.9 | ⬜ 待创建 | 合并脚本 |
| `exp_4_2_1_baseline_models.py` | 4.2.1 | ⬜ 待创建 | |
| `exp_4_2_2_deep_models.py` | 4.2.2 | ⬜ 待创建 | |
| `exp_4_2_3_model_comparison_plot.py` | 4.2.3 | ⬜ 待创建 | |
| `exp_4_2_4_ablation.py` | 4.2.4 | ⬜ 待创建 | |
| `exp_4_3_1_backtest_config.py` | 4.3.1 | ⬜ 待创建 | |
| `exp_4_3_2_backtest.py` | 4.3.2, 4.3.3 | ⬜ 待创建 | 合并脚本 |
| `exp_4_3_3_ofi_comparison.py` | 4.3.4 | ⬜ 待创建 | |
| `exp_4_4_1_shap_analysis.py` | 4.4.1, 4.4.2 | ⬜ 待创建 | 合并脚本 |
| `exp_4_4_2_regime_split.py` | 4.4.3 | ⬜ 待创建 | |
| `exp_4_4_3_asset_split.py` | 4.4.4 | ⬜ 待创建 | |

**脚本总数**：17个（其中4个为合并脚本）

---

## 六、执行日志 (Execution Log)

| 日期 | 完成任务 | 耗时 | 备注 |
|------|----------|------|------|
| 2026-01-13 | - | - | 清单初始化 |
| | | | |
| | | | |

---

## 七、问题与阻塞 (Issues & Blockers)

| 日期 | 任务 | 问题描述 | 状态 | 解决方案 |
|------|------|----------|------|----------|
| | | | | |

---

## 八、产出物核查清单 (Output Checklist)

### 表格产出（14个）

- [ ] 表4-1：样本描述性统计汇总
- [ ] 表4-2：OFI特征描述性统计
- [ ] 表4-3：不同预测步长下的标签分布
- [ ] 表4-4：OFI与同期收益率相关系数
- [ ] 表4-5：OFI对同期收益的线性回归结果
- [ ] 表4-6：不同深度OFI的解释力对比
- [ ] 表4-7：基准模型性能汇总
- [ ] 表4-8：深度学习模型性能汇总
- [ ] 表4-9：特征消融实验结果
- [ ] 表4-10：回测参数设置
- [ ] 表4-11：各模型经济价值指标对比
- [ ] 表4-12：Smart-OFI与基础OFI策略经济价值对比
- [ ] 表4-13：不同市场状态下的模型性能对比
- [ ] 表4-14：不同资产类型的模型性能对比

### 图片产出（7个）

- [ ] 图4-1：OFI系列特征分布直方图
- [ ] 图4-2：OFI冲击系数的日内变化模式
- [ ] 图4-3：不同深度OFI的解释力对比
- [ ] 图4-4：模型性能对比
- [ ] 图4-5：各策略净值曲线对比
- [ ] 图4-6：SHAP特征重要性排序
- [ ] 图4-7：极端行情样本的SHAP归因分析

---

> **使用说明**：
> 1. 每完成一个任务，更新对应行的"状态"列
> 2. 在"执行日志"中记录完成情况
> 3. 遇到问题在"问题与阻塞"中记录
> 4. 最终产出在"产出物核查清单"中打勾确认

